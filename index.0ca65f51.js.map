{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","js/main.js","node_modules/@swc/helpers/src/_async_to_generator.mjs","node_modules/@swc/helpers/src/_sliced_to_array.mjs","node_modules/@swc/helpers/src/_array_with_holes.mjs","node_modules/@swc/helpers/src/_iterable_to_array.mjs","node_modules/@swc/helpers/src/_non_iterable_rest.mjs","node_modules/@swc/helpers/src/_unsupported_iterable_to_array.mjs","node_modules/@swc/helpers/src/_array_like_to_array.mjs","node_modules/@swc/helpers/src/_to_consumable_array.mjs","node_modules/@swc/helpers/src/_array_without_holes.mjs","node_modules/@swc/helpers/src/_non_iterable_spread.mjs","node_modules/regenerator-runtime/runtime.js","node_modules/nanoid/index.browser.js","js/components.js","node_modules/@swc/helpers/src/_assert_this_initialized.mjs","node_modules/@swc/helpers/src/_class_call_check.mjs","node_modules/@swc/helpers/src/_create_class.mjs","node_modules/@swc/helpers/src/_define_property.mjs","node_modules/@swc/helpers/src/_inherits.mjs","node_modules/@swc/helpers/src/_set_prototype_of.mjs","node_modules/@swc/helpers/src/_wrap_native_super.mjs","node_modules/@swc/helpers/src/_construct.mjs","node_modules/@swc/helpers/src/_is_native_function.mjs","node_modules/@swc/helpers/src/_get_prototype_of.mjs","node_modules/@swc/helpers/src/_create_super.mjs","node_modules/@swc/helpers/src/_is_native_reflect_construct.mjs","node_modules/@swc/helpers/src/_possible_constructor_return.mjs","node_modules/@swc/helpers/src/_type_of.mjs","node_modules/attodom/index.js","node_modules/attodom/el.js","node_modules/attodom/src/events.js","node_modules/attodom/svg.js","js/utilities.js","node_modules/@swc/helpers/src/_object_spread.mjs","node_modules/@swc/helpers/src/_object_spread_props.mjs","node_modules/file-saver/src/FileSaver.js","node_modules/@parcel/runtime-js/lib/runtime-15dac9cb2650ae33.js","node_modules/@parcel/runtime-js/lib/helpers/browser/js-loader.js","node_modules/@parcel/runtime-js/lib/helpers/cacheLoader.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/flyd/lib/index.js","node_modules/ramda/src/curryN.js","node_modules/ramda/src/internal/_arity.js","node_modules/ramda/src/internal/_curry1.js","node_modules/ramda/src/internal/_isPlaceholder.js","node_modules/ramda/src/internal/_curry2.js","node_modules/ramda/src/internal/_curryN.js","node_modules/flyd/module/droprepeats/index.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-29f4778d9fb22371.js","node_modules/ngraph.graph/index.js","node_modules/ngraph.events/index.js","node_modules/@parcel/runtime-js/lib/runtime-dd515c7cb19df1f1.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { nanoid } from 'nanoid'\r\nconst createGraph = require('ngraph.graph')\r\nimport { ClosingDetails, TabPanel, TabGroup, TagList, ModalOverlay, DialogPrompt, Toast,\r\n          } from './components.js'\r\nimport { err, zip, equal, take, arrayUnique, filterObjectByKey, substituteText, Tree, bfsTree,\r\n          cloneTemplateFrom, parseDoc, exportObject, encryptMessage } from './utilities.js'\r\n\r\nimport PUBLIC_KEY from 'bundle-text:../pubkey.asc'\r\nconst OBFUSCATED_FORMSPREE_ENDPOINT = \"aHR0cHM6Ly9mb3Jtc3ByZWUuaW8vZi9tYmp3cGRwdw==\"\r\nconst DATA_URL = \"https://devious-digitizer-data.netlify.app/\"\r\n\r\nconst cloneTemplate = cloneTemplateFrom(document)\r\n\r\ncustomElements.define('closing-details', ClosingDetails, {extends: 'details'})\r\ncustomElements.define('tab-panel', TabPanel)\r\ncustomElements.define('tab-group', TabGroup)\r\ncustomElements.define('tag-list', TagList, {extends: 'ul'})\r\ncustomElements.define('modal-overlay', ModalOverlay)\r\ncustomElements.define('dialog-prompt', DialogPrompt)\r\ncustomElements.define('toast-box', Toast)\r\n\r\n//document.getElementById('landing_settings_link').addEventListener(\r\n//    'click',\r\n//    _ => document.body.append(settings(state.history[0].passage.title, routeTree))\r\n//)\r\ndocument.getElementById('landing_feedback_link').addEventListener(\r\n    'click',\r\n    _ => document.body.append(feedback(null, null, null, navigator.userAgent))\r\n)\r\ndocument.getElementById('landing_privacy_link').addEventListener(\r\n    'click',\r\n    _ => document.body.append(privacy())\r\n)\r\n\r\ndocument.getElementById('file_select').addEventListener('change', e => switchToStory(e.target.files[0]))\r\n\r\nconst dragDropOverlay = document.getElementById('drag_drop_overlay')\r\ndocument.body.addEventListener('dragenter', e => {\r\n    // TODO make nice drag drop overlay\r\n    // new Overlay(null, ['Drag-and-drop icon goes here'])._overlay.open(document.body)\r\n    e.preventDefault()\r\n})\r\ndocument.body.addEventListener('dragover', e => e.preventDefault())\r\ndocument.body.addEventListener('dragleave', _ => {\r\n    // document.querySelector('.drag_drop_overlay').close()\r\n})\r\ndocument.body.addEventListener('drop', e => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    if (e.dataTransfer.files) switchToStory(e.dataTransfer.files[0])\r\n})\r\n\r\n\r\n/// TEMPLATES ///\r\n\r\n// FIX fadeTime is unimplemented\r\nfunction toast(text, lingerTime = 3, fadeTime = 1) {\r\n    const toast = document.createElement('toast-box')\r\n    toast.setAttribute('text', text)\r\n    toast.setAttribute('linger-time', lingerTime)\r\n    //toast.setAttribute('fade-time', fadeTime)\r\n    return toast\r\n}\r\n\r\n// modal prompt: \"file does not appear to be a Devious World or Devious Mundanity file\".\r\n//      options: cancel (return false), try anyway (return true), clicking away is same as cancel\r\nasync function askToConfirm(filename) {\r\n    return new Promise((res, rej) => {\r\n        const respond = response => e => {\r\n            if (e.target == e.currentTarget) {\r\n                e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n                res(response)\r\n            }\r\n        }\r\n\r\n        const template = cloneTemplate('confirmation_template')\r\n\r\n        const prompt = template.querySelector('.confirm_prompt')\r\n        prompt.textContent = substituteText(prompt.textContent, {filename})\r\n        template.querySelector('modal-overlay').addEventListener('click', respond(false))\r\n        template.querySelector('.cancel').addEventListener('click', respond(false))\r\n        template.querySelector('.try_anyway').addEventListener('click', respond(true))\r\n\r\n        document.body.append(template)\r\n    })\r\n}\r\n\r\nfunction sidebarMenu(tale, state, routeTree, userAgent) {\r\n    const template = cloneTemplate('sidebar_menu_template')\r\n\r\n    template.querySelector('.settings_link').addEventListener(\r\n        'click',\r\n        _ => document.body.append(settings(state.history[0].passage.title, routeTree))\r\n    )\r\n\r\n    template.querySelector('.feedback_link').addEventListener(\r\n        'click',\r\n        _ => document.body.append(feedback(tale, state, routeTree, userAgent))\r\n    )\r\n\r\n    template.querySelector('.privacy_link').addEventListener(\r\n        'click',\r\n        _ => document.body.append(privacy())\r\n    )\r\n\r\n    return template\r\n}\r\n\r\nfunction settings(curr, routeTree) {\r\n    const template = cloneTemplate('settings_template')\r\n\r\n    const close = e => {\r\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n    }\r\n    template.querySelector('modal-overlay').addEventListener('click', close)\r\n    template.querySelector('.close_settings').addEventListener('click', close)\r\n\r\n    const tagEditor = template.querySelector('.tag_editor')\r\n    tagEditor.value = gatherTags(curr, routeTree).join(' ')\r\n\r\n    template.querySelector('.save_tags').addEventListener('click', _ => {\r\n        const psg = routeTree.get(curr)\r\n        if (psg) psg.modifiedTags = tagEditor.value.split(' ')\r\n        document.body.append(toast(\"tags saved!\", 2))\r\n    })\r\n\r\n    // TODO? Add \"revert tags\" button\r\n\r\n    template.querySelector('.export_metadata').addEventListener('click', _ =>\r\n        exportObject(extractMetadata(routeTree), 'metadata.json'))\r\n\r\n    return template\r\n}\r\n\r\n// Caches form to make filled-in info persistent\r\nlet feedbackForm\r\nfunction buildFeedback() {\r\n    const template = cloneTemplate('feedback_template')\r\n\r\n    const close = e => {\r\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n    }\r\n    template.querySelector('modal-overlay').addEventListener('click', close)\r\n    template.querySelector('.close_feedback').addEventListener('click', close)\r\n    \r\n    // give a visual indicator that debug_info is being disabled\r\n    const debugInfo = template.querySelector('.debug_info')\r\n    const includeDebugInfo = template.querySelector('.include_debug_info')\r\n    includeDebugInfo.addEventListener('change', _ => {debugInfo.disabled = !includeDebugInfo.checked})\r\n    \r\n    const submit = type => e => {\r\n        e.preventDefault()\r\n        \r\n        const feedbackID = `${type}-${nanoid(6)}`\r\n        \r\n        // disable debug info when requested so it is not included in BUG feedback messages\r\n        debugInfo.disabled = !includeDebugInfo.checked\r\n        \r\n        const data = new FormData(e.target)\r\n        data.append('id', feedbackID)\r\n        \r\n        const subject = `Devious Digitizer Feedback ${feedbackID}`\r\n        const body = [...data.entries()].map(([k, v]) => `${k}: ${v}`).join('\\n\\n')\r\n        \r\n        document.body.append(feedbackPreview(subject, body, e.target))\r\n    }\r\n    template.querySelector('.bug_report').addEventListener('submit', submit('BUG'))\r\n    template.querySelector('.feature_request').addEventListener('submit', submit('REQ'))\r\n    template.querySelector('.help_request').addEventListener('submit', submit('HLP'))\r\n    template.querySelector('.submit_tags').addEventListener('submit', submit('TAG'))\r\n\r\n    return template\r\n}\r\n\r\nfunction feedback(tale, state, routeTree, userAgent) {\r\n    feedbackForm ??= buildFeedback().firstChild\r\n    \r\n    feedbackForm.querySelector('.debug_info').textContent = gatherDebugInfo(tale, state, userAgent)\r\n    \r\n    if (routeTree !== null) {\r\n        feedbackForm.querySelector('.tag_changes').textContent = gatherTagChanges(routeTree)\r\n    }\r\n    \r\n    return feedbackForm\r\n}\r\n\r\nfunction feedbackPreview(subject, body, form) {\r\n    const template = cloneTemplate('feedback_preview_template')\r\n    \r\n    template.querySelector('.subject').textContent = subject\r\n    template.querySelector('.body').textContent = body\r\n    \r\n    const close = e => {\r\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n    }\r\n    template.querySelector('modal-overlay').addEventListener('click', close)\r\n    template.querySelector('.cancel').addEventListener('click', close)\r\n    \r\n    template.querySelector('.submit').addEventListener('click', e => {\r\n        encryptMessage(PUBLIC_KEY, body)\r\n            .then(encryptedBody => sendFormspree(subject, encryptedBody))\r\n            .then(_ => {\r\n                form.reset()\r\n                e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n                document.body.append(toast(\"feedback sent successfully ^_^\"))\r\n            })\r\n            .catch(msg => alert(`something went wrong:\\n${msg}`))\r\n    })\r\n    \r\n    return template\r\n}\r\n\r\nfunction privacy() {\r\n    const template = cloneTemplate('privacy_template')\r\n    \r\n    const close = e => {\r\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n    }\r\n    template.querySelector('modal-overlay').addEventListener('click', close)\r\n    template.querySelector('.close_privacy').addEventListener('click', close)\r\n    \r\n    return template\r\n}\r\n\r\nfunction retrospective(curr, routeTree, tale) {\r\n    const template = cloneTemplate('retrospective_template')\r\n\r\n    template.querySelector('.choice--current').innerText = routeTree.get(curr)?.link?.text ?? ''\r\n\r\n    template.querySelector('.past_passages').ontoggle = (e) => {\r\n        if (e.target.open) {\r\n            e.target.ontoggle = null\r\n            e.target.prepend(\r\n                ...routeTree\r\n                .getAncestryOf(curr)\r\n                .map(title => pastPassage(routeTree.get(title)?.link?.text ?? 'Start', tale.get(title))))\r\n        }\r\n    }\r\n\r\n    return template\r\n}\r\n\r\nfunction pastPassage(choice, psg) {\r\n    const template = cloneTemplate('past_passage_template')\r\n\r\n    template.querySelector('.choice--past').innerText = choice\r\n    template.querySelector('.past_passage__text').append(psg.render().querySelector('.body.content'))\r\n\r\n    return template\r\n}\r\n\r\nfunction passageTagViewer(tags) {\r\n    const tagViewer = cloneTemplate('tag_viewer_template')\r\n    tagViewer.querySelector('.tag_list').tags(tags)\r\n\r\n    return tagViewer\r\n}\r\n\r\nfunction inlineTagViewer(passageTags, routeTags) {\r\n    const tagViewer = cloneTemplate('inline_tag_viewer_template')\r\n    tagViewer.querySelector('.tag_list--passage').tags(passageTags)\r\n    tagViewer.querySelector('.tag_list--route').tags(routeTags)\r\n\r\n    return tagViewer\r\n}\r\n\r\n\r\n/// Devious Digitizer ///\r\n\r\nfunction gatherTags(title, routeTree, recursive = false) {\r\n    if (!recursive) return routeTree.get(title)?.modifiedTags ?? routeTree.get(title)?.tags ?? []\r\n    return arrayUnique(\r\n        Tree.cata(\r\n            routeTree,\r\n            title,\r\n            node => (node.modifiedTags ?? node.tags ?? []).concat(...node.children)\r\n        )\r\n    )\r\n        // arrayUnique([...(node.tags ?? []), ...node.children.flatMap(child => gatherTags(child, routeTree, true))])\r\n}\r\n\r\nasync function sendFormspree(subject, body) {\r\n    const data = new FormData()\r\n    data.append('subject', subject)\r\n    data.append('body', body)\r\n    \r\n    const response = await fetch(atob(OBFUSCATED_FORMSPREE_ENDPOINT), {\r\n        method: 'POST',\r\n        body: data,\r\n        headers: {\r\n            'Accept': 'application/json'\r\n        }\r\n    })\r\n    if (!response.ok) {\r\n        const errMsg = \"There was a problem while trying to send your feedback. Please try again in a moment.\"\r\n        const data = await response.json()\r\n        if (Object.hasOwn(data, 'errors')) {\r\n            throw new Error(errMsg + data[\"errors\"].map(error => error[\"message\"]).join(\", \"))\r\n        } else {\r\n            throw new Error(errMsg)\r\n        }\r\n    }\r\n}\r\n\r\nfunction gatherDebugInfo(tale, state, userAgent) {\r\n    return JSON.stringify({\r\n        userAgent,\r\n        deviousVersion: tale?.title,\r\n        currentPassage: state ? state.history[0].passage.title : null,\r\n        // TODO version of Devious Digitizer\r\n        // TODO version of tags\r\n    }, null, 2)\r\n}\r\n\r\nfunction gatherTagChanges(routeTree) {\r\n    return JSON.stringify(\r\n        Object.fromEntries(\r\n            [...routeTree]\r\n            .filter(([k,v]) => v.hasOwnProperty('modifiedTags'))\r\n            .map(([k,v]) => [k, v.modifiedTags])\r\n        ),\r\n        null,\r\n        2,\r\n    )\r\n}\r\n\r\nasync function switchToStory(file) {\r\n    // TODO? clear previous twine elements to allow for loading more than one story\r\n    const storyText = await file.text()\r\n    const storyDoc = parseDoc(storyText)\r\n\r\n    // is document one of DW or DM?\r\n    if (!storyDoc.querySelector('#storeArea > [tiddler = \"CharGenMain\"]')) {\r\n        const confirmContinue = await askToConfirm(file.name)\r\n        if (!confirmContinue) return;\r\n    }\r\n\r\n    hideLanding()\r\n    loadDocIntoDom(storyDoc)\r\n    await injectDigitizerFeatures()\r\n}\r\n\r\nfunction hideLanding() {\r\n    document.querySelector('.digitizer-landing').classList.add('digitizer-landing--inactive')\r\n}\r\n\r\nfunction loadDocIntoDom(doc) {\r\n    document.head.insertAdjacentHTML(\"beforeend\", doc.head.innerHTML)\r\n    document.body.insertAdjacentHTML(\"beforeend\", doc.body.innerHTML)\r\n\r\n    // prevent engine script from running multiple times?\r\n    document.head.querySelectorAll('script').forEach(s => eval(s.text))\r\n    dispatchEvent(new Event('load'))\r\n}\r\n\r\nasync function injectDigitizerFeatures () {\r\n    const store = document.getElementById('storeArea')\r\n    const passages = document.getElementById('passages')\r\n    const tale = window.tale\r\n    const state = window.state\r\n\r\n    // determine whether this is DW or DM by checking which character starts are present\r\n    const DWChars = ['allstarstart', 'youngpunkstart', 'quietonestart', 'runawaystart', 'GwynStart', 'BuddyStart', 'AustinStart', 'DavidStart', 'JackStart', 'MikeStart', 'ThaddeusStart', 'SweetKidStart', 'MeanGirlStart', 'GirlGamerStart', 'SelfSufficientStart', 'CallistaStart', 'BritStart', 'WilmaStart', 'HollyStart', 'CelesteStart', 'HelenStart', 'MareiStart', 'IreneStart']\r\n    const DMChars = ['CaliburnStart', 'DefianceStart', 'EdithStart', 'FionaStart', 'IrethStart', 'KaiStart', 'KiaraStart', 'KonkoStart', 'LeoStart', 'MaxiaStart', 'NicholasStart', 'SimoneStart', 'SiphaStart', 'ValerieStart', 'YamiStart']\r\n    const metadataName = DWChars.some(tale.has, tale) ? 'DW_metadata.json' :\r\n                         DMChars.some(tale.has, tale) ? 'DM_metadata.json' :\r\n                                                    err('Story is neither Worldly nor Mundane')\r\n    // fetch the relevant metadata file from the server\r\n    const metadata = await fetch(DATA_URL + metadataName).then(res => res.json())\r\n\r\n    // build a graph from passages' links\r\n    const passageGraph = buildPassageGraph(store)\r\n\r\n    // render the graph into a tree of story routes by following links starting at CharGenMain and dropping cycles\r\n    const routeTree = Tree.fromGraphBfs(\r\n        (addChild, currentChild) => passageGraph.forEachLinkedNode(\r\n            currentChild,\r\n            (child, link) => addChild(child.id, Object.assign({link: link.data}, child.data)),\r\n            true // only traverse outbound links\r\n        ),\r\n        'CharGenMain'\r\n    )\r\n    // decorate routeTree with tags and other metadata\r\n    routeTree.forEach((value, key) => routeTree.set(key, Object.assign(value, metadata[key])))\r\n\r\n    // dispatch events when switching passages\r\n    window.state.display = function (title, source, type, callback) {\r\n        passages.dispatchEvent(new CustomEvent(\r\n            'before_tale_display',\r\n            {detail: {title, source, type, callback}}))\r\n        Object.getPrototypeOf(window.state).display.apply(this, [title, source, type, callback])\r\n        passages.dispatchEvent(new CustomEvent(\r\n            'after_tale_display',\r\n            {detail: {title, source, type, callback}}))\r\n    }\r\n\r\n    // (Twine conveniently cleans out the previous passage's viewers while removing the previous passage)\r\n    passages.addEventListener(\r\n        'after_tale_display',\r\n        (e) => {\r\n            const curr = e.detail.title\r\n            // if we have metadata for current passage\r\n            if (routeTree.has(curr)) {\r\n                // above passage, add a viewer for current passage's tags and\r\n                passages.prepend(passageTagViewer(gatherTags(curr, routeTree)))\r\n                // if the current passage has preceding passages\r\n                if (routeTree.get(curr).parent)\r\n                    // a retrospective of preceding passages\r\n                    passages.prepend(retrospective(curr, routeTree, tale))\r\n            }\r\n        }\r\n    )\r\n\r\n    // add target passage name to passage links to assist in adding the inline tag viewers\r\n    passages.addEventListener(\r\n        'after_tale_display',\r\n        (e) => annotateLinksWithTheirTarget(e.detail.title, tale, passages.querySelector('.passage.transition-in > .body'))\r\n    )\r\n\r\n    // add inline tag viewer elements to new passages\r\n    passages.addEventListener(\r\n        'after_tale_display',\r\n        (e) => addLinkTagLists(passages.querySelector('.passage.transition-in > .body'), routeTree)\r\n    )\r\n\r\n    // Add sidebar links //\r\n    document.getElementById('sidebar').append(sidebarMenu(tale, state, routeTree, navigator.userAgent))\r\n}\r\n\r\nconst getLinks = body =>\r\n    Array.from(body.matchAll(/\\[\\[(?:([^|]+)\\|)?([^\\]]+)\\]\\]/g)).map(([_, text,  target]) => ({ text, target }))\r\n\r\n// TODO? rewrite using tale instead of storeArea\r\nfunction buildPassageGraph(storeArea) {\r\n    const g = createGraph()\r\n\r\n    const titles = new Set(Array.from(storeArea.children).map((el) => el.getAttribute('tiddler')))\r\n\r\n    for (const passage of storeArea.children) {\r\n        const title = passage.getAttribute('tiddler')\r\n\r\n        for (const { text, target } of getLinks(passage.innerText)) {\r\n            // only include links to passages that exist\r\n            if (titles.has(target)) {\r\n                // create a link between the current and target passages, creating a node for the\r\n                //   target passage if one does not yet exist, and annotating the link with its text\r\n                g.addLink(title, target, { text })\r\n            }\r\n        }\r\n    }\r\n\r\n    return g\r\n}\r\n\r\nfunction annotateLinksWithTheirTarget(title, tale, passageBody) {\r\n    const linkTargets = getLinks(tale.get(title).text).map(({target}) => target)\r\n    const links = Array.from(passageBody.querySelectorAll('a'))\r\n\r\n    for (const [link, target] of take(100, zip([links, linkTargets]))) {\r\n        link.setAttribute('data-target', target)\r\n    }\r\n}\r\n\r\nfunction addLinkTagLists(passageBody, routeTree) {\r\n    passageBody\r\n        .querySelectorAll('a[data-target]')\r\n        .forEach((link) => {\r\n            const title = link.getAttribute('data-target') // NOTE depends on annotateLinksWithTheirTarget\r\n            // if target passage exists\r\n            if (routeTree.has(title)) {\r\n                link.before( inlineTagViewer(\r\n                    gatherTags(title, routeTree, false),\r\n                    gatherTags(title, routeTree, true)\r\n                ))\r\n            }\r\n        })\r\n}\r\n\r\nfunction extractMetadata(routeTree) {\r\n    const include = new Set(['tags', 'modifiedTags'])\r\n    const strip = value => filterObjectByKey(value, key => include.has(key))\r\n\r\n    return routeTree.toObject(([key, value]) => [key, strip(value)])\r\n}\r\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n","import arrayWithHoles from './_array_with_holes.mjs';\nimport iterableToArrayLimit from './_iterable_to_array.mjs';\nimport nonIterableRest from './_non_iterable_rest.mjs';\nimport unsupportedIterableToArray from './_unsupported_iterable_to_array.mjs';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","import _arrayLikeToArray from './_array_like_to_array.mjs';\n\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return _arrayLikeToArray(o, minLen);\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n","import arrayWithoutHoles from './_array_without_holes.mjs';\nimport iterableToArray from './_iterable_to_array.mjs';\nimport nonIterableSpread from './_non_iterable_spread.mjs';\nimport unsupportedIterableToArray from './_unsupported_iterable_to_array.mjs';\n\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n","import _arrayLikeToArray from './_array_like_to_array.mjs';\n\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","// import * as petit from 'petit-dom'\r\n// const el = petit.h\r\n// const render = (parent, child, opts) => petit.render(child, parent, opts)\r\n\r\n// import { el, mount } from 'redom'\r\n\r\nimport { el } from 'attodom'\r\nimport { nanoid } from 'nanoid'\r\nimport { pipe, setClass, sleep } from './utilities.js'\r\n\r\nimport flyd from 'flyd'\r\nimport { dropRepeats } from 'flyd/module/droprepeats'\r\nconst { stream } = flyd\r\nconst combine = (streams, fn) => flyd.combine(fn, streams)\r\nconst update = (s, fn) => s(fn(s()))\r\n//const sideEffect = flyd.curryN(2, (fn, s) => flyd.map(x => {fn(x); return x;}, s))\r\n\r\n\r\nconst updateAttribute = (srm, attr, obj) => pipe(\r\n    srm,\r\n    dropRepeats,\r\n    flyd.on(x => obj.getAttribute(attr) === x ? null : obj.setAttribute(attr, x))\r\n)\r\n\r\n\r\n//// Web Components ////\r\n\r\nexport class ClosingDetails extends HTMLDetailsElement {\r\n    constructor() {\r\n        super()\r\n\r\n        this._closeIfUnfocused = (e) => {\r\n            if (!this.contains(document.elementFromPoint(e.clientX, e.clientY))) {\r\n                this.open = false\r\n            }\r\n        }\r\n    }\r\n\r\n    connectedCallback() {\r\n        document.body.addEventListener('mousedown', this._closeIfUnfocused)\r\n    }\r\n\r\n    disconnectedCallback () {\r\n        document.body.removeEventListener('mousedown', this._closeIfUnfocused)\r\n    }\r\n}\r\n\r\n// TODO respond to `disabled` attribute\r\nexport class TabPanel extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, ':host {display: none;} :host(.active) {display: block;}'),\r\n            el('div', {role: 'tabpanel'}, el('slot'))\r\n        )\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.title(this.getAttribute('title') ?? '')\r\n        this.group(this.parentElement instanceof TabGroup ? this.parentElement : null)\r\n        this.id = this.id || nanoid(10)\r\n    }\r\n\r\n    static get observedAttributes() { return ['id', 'title']; }\r\n    attributeChangedCallback(name, oldVal, newVal) {\r\n        if (name === 'id') { this.idChanged(null) }\r\n        else if (name === 'title') { this.title(newVal) }\r\n    }\r\n\r\n    idChanged = stream(null)\r\n    title = stream()\r\n    _onTitleChanged = updateAttribute(this.title, 'title', this)\r\n    group = stream()\r\n    active = combine([this.group.chain(g => g?.active), this.idChanged], (gActive, _) => {\r\n        const active = gActive() === this.id\r\n        setClass(this, 'active', active)\r\n        return active\r\n    })\r\n}\r\n\r\n// TODO respond to `disabled` attribute on TabPanels\r\nexport class TabGroup extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, `\r\n                #tabgroup { display: flex; flex-flow: var(--tabs-position, column) nowrap; gap: var(--tablist-gap, 0); }\r\n                #tablist { display: flex; flex-flow: var(--tabs-flow, row wrap); align-items: var(--tab-align); margin: 0;\r\n                    padding: 0; gap: var(--tabs-gap, .5em); }\r\n                .tab { display: block; background: var(--tab-background); cursor: var(--tab-cursor); padding: var(--tab-padding);\r\n                    border: var(--tab-border); border-style: var(--tab-border-style); border-color: var(--tab-border-color);\r\n                    border-width: var(--tab-border-width); border-radius: var(--tab-border-radius); }\r\n                .tab.active { background: var(--tab-active-background); border: var(--tab-active-border);\r\n                    border-style: var(--tab-active-border-style); border-color: var(--tab-active-border-color);\r\n                    border-width: var(--tab-active-border-width); border-radius: var(--tab-active-border-radius); }`\r\n            ),\r\n            el('div', {part: 'tabgroup', role: 'wrapper', id: 'tabgroup'}, [\r\n                el('slot'),\r\n                el('menu', {part: 'tablist', role: 'tablist', id: 'tablist'})]\r\n            )\r\n        )\r\n        this.shadowRoot\r\n            .querySelector('slot')\r\n            .addEventListener(\r\n                'slotchange',\r\n                e => this.tabs(e.target.assignedElements().filter(x => x instanceof TabPanel))\r\n            )\r\n    }\r\n\r\n    static get observedAttributes() { return ['active']; }\r\n    attributeChangedCallback(name, oldVal, newVal) {\r\n        if (name === 'active') { this.active(newVal) }\r\n    }\r\n\r\n    defaultTabTitle = ''\r\n    tabs = stream()\r\n    active = stream(null)\r\n    _onActiveChanged = updateAttribute(this.active, 'active', this)\r\n\r\n    renderTabList = combine([this.tabs, this.active], (tabs, active) => {\r\n        // if `active` isn't a valid reference to a child tab-panel, default to the first tab-panel\r\n        if (!tabs().some(el => el.id === active())) {\r\n            this.active(tabs()[0]?.id)\r\n            return\r\n        }\r\n        this.shadowRoot.getElementById('tablist').replaceChildren(\r\n            ...tabs().map(tab => el('li', {\r\n                    class: ('tab' + ((active() === tab.id) ? ' active' : '')),\r\n                    onclick: () => this.active(tab.id),\r\n                    'aria-controls': tab.id,\r\n                    role: 'tab',\r\n                },\r\n                tab.title() || this.defaultTabTitle\r\n            ))\r\n        )\r\n    })\r\n}\r\n\r\nexport class TagList extends HTMLUListElement {\r\n    connectedCallback() {\r\n        this.connected(true)\r\n    }\r\n\r\n    connected = stream()\r\n\r\n    tags = stream([])\r\n\r\n    render = combine([this.tags, this.connected], (tags) =>\r\n        // TODO convert to using attodom.list?\r\n        this.replaceChildren(\r\n            ...tags().sort().map(tag => el('li', {class: 'tag_list__tag'}, tag))\r\n        )\r\n    )\r\n}\r\n\r\nexport class ModalOverlay extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, `\r\n                #overlay {\r\n                    display: var(--overlay-display, flex); flex-flow: column nowrap; justify-content: safe center;\r\n                    align-items: center;\r\n\r\n                    position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%;\r\n                    overflow: auto;\r\n\r\n                    background-color: var(--overlay-color, rgba(0,0,0,0.4));\r\n                }`\r\n            ),\r\n            el('div', {id: 'overlay'}, [el('slot')]),\r\n        )\r\n        this.addEventListener('request_overlay_close', e => {e.stopPropagation(); this.close()})\r\n    }\r\n    \r\n    static closeRequest = new Event('request_overlay_close', {bubbles:true, cancelable:true})\r\n\r\n    open(parent) {\r\n        parent.appendChild(this._overlay)\r\n    }\r\n    \r\n    close() { this.remove() }\r\n}\r\n\r\nexport class DialogPrompt extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, `\r\n                #dialog {\r\n                    background-color: var(--dialog-color, grey); padding: var(--dialog-padding, 2em);\r\n                    border: var(--dialog-border); border-radius: var(--dialog-border-radius);\r\n                }\r\n\r\n                #buttons {\r\n                    display: flex; flex-flow: row wrap; justify-content: space-around;\r\n                    align-items: center; align-content: space-around; border: none;\r\n                }`\r\n            ),\r\n            el('form', {id: 'dialog', onsubmit: _ => false}, [\r\n                el('slot', {name: 'prompt'}),\r\n                el('fieldset', {id: 'buttons'}, [el('slot', {name: 'buttons'})])\r\n            ]),\r\n        )\r\n    }\r\n}\r\n\r\nexport class Toast extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, `\r\n                @keyframes fadeOut {\r\n                    from {opacity: 1;}\r\n                    to {opacity: 0;}\r\n                }\r\n                \r\n                #toast {\r\n                    background-color: var(--toast-color, grey); padding: var(--toast-padding, 2em);\r\n                    border: var(--toast-border); border-radius: var(--toast-border-radius);\r\n                    position: fixed; z-index: 1; left: 50%; bottom: 25%; transform: -50%;\r\n                }\r\n                \r\n                #toast.fade {\r\n                    animation: fadeOut 1s ease-in;\r\n                }` // TODO make fade out time customizable\r\n            ),\r\n            el('p', {id:'toast'}),\r\n        )\r\n        \r\n        this.shadowRoot.getElementById('toast').addEventListener(\r\n            'animationend',\r\n            e => {if (e.animationName === 'fadeOut') this.remove()}\r\n        )\r\n    }\r\n    \r\n    connectedCallback() {\r\n        const toast = this.shadowRoot.getElementById('toast')\r\n        toast.textContent = this.getAttribute('text')\r\n        sleep(Number(this.getAttribute('linger-time')) * 1000)\r\n            .then(_ => toast.classList.add('fade'))\r\n    }\r\n}\r\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","import setPrototypeOf from './_set_prototype_of.mjs';\n\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n","function setPrototypeOf(o, p) {\n  setPrototypeOf = Object.setPrototypeOf || function setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return setPrototypeOf(o, p);\n}\n\nexport default function _setPrototypeOf(o, p) {\n  return setPrototypeOf(o, p);\n}\n","import construct from './_construct.mjs';\nimport isNativeFunction from './_is_native_function.mjs';\nimport getPrototypeOf from './_get_prototype_of.mjs';\nimport setPrototypeOf from './_set_prototype_of.mjs';\n\nfunction wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  wrapNativeSuper = function wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return wrapNativeSuper(Class);\n}\n\nexport default function _wrapNativeSuper(Class) {\n  return wrapNativeSuper(Class);\n}\n","import _setPrototypeOf from \"./_set_prototype_of.mjs\";\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    construct = Reflect.construct;\n  } else {\n    construct = function construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return construct.apply(null, arguments);\n}\n\nexport default function _construct(Parent, args, Class) {\n  return construct.apply(null, arguments);\n}\n","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n","function getPrototypeOf(o) {\n  getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return getPrototypeOf(o);\n}\n\nexport default function _getPrototypeOf(o) {\n  return getPrototypeOf(o);\n}","import _isNativeReflectConstruct from \"./_is_native_reflect_construct.mjs\";\nimport _getPrototypeOf from \"./_get_prototype_of.mjs\";\nimport _possibleConstructorReturn from './_possible_constructor_return.mjs';\n\nexport default function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n    return function _createSuperInternal() {\n        var Super = _getPrototypeOf(Derived),\n            result;\n        if (hasNativeReflectConstruct) {\n            var NewTarget = _getPrototypeOf(this).constructor;\n            result = Reflect.construct(Super, arguments, NewTarget);\n        } else {\n            result = Super.apply(this, arguments);\n        }\n        return _possibleConstructorReturn(this, result);\n    };\n}","export default function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n    try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { }));\n        return true;\n    } catch (e) {\n        return false;\n    }\n}","import assertThisInitialized from './_assert_this_initialized.mjs';\nimport _typeof from './_type_of.mjs';\n\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n","export default function _typeof(obj) {\n    \"@swc/helpers - typeof\";\n    return obj && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n};\n","// @ts-check\n/* eslint-disable global-require */\nexport { default as el } from './el.js'\nexport { default as svg } from './svg.js'\nexport { default as list } from './list.js'\nexport { default as find } from './find.js'\nexport { default as css } from './css.js'\n","import EVENTS from './src/events.js'\n\nvar htmlProps = {\n\tid: true,\n\tnodeValue: true,\n\ttextContent: true,\n\tclassName: true,\n\tinnerHTML: true,\n\ttabIndex: true,\n\tvalue: true\n}\n\n/**\n * @param {string|HTMLElement} tagName\n * @return {HTMLElement}\n */\nexport default function(tagName) {\n\t//@ts-ignore\n\tvar node = tagName.nodeType === 1 ? tagName : document.createElement(tagName)\n\n\tfor (var i=1; i<arguments.length; ++i) {\n\t\tvar arg = arguments[i]\n\t\tif (arg != null) {\n\t\t\t//TODO skip .constructor\n\t\t\tif (!arg.constructor || arg.constructor === Object) for (var j=0, ks=Object.keys(arg); j<ks.length; ++j) {\n\t\t\t\tvar key = ks[j],\n\t\t\t\t\t\tval = arg[key]\n\t\t\t\tif (key === 'style') node.style.cssText = val\n\t\t\t\telse if (typeof val !== 'string' || htmlProps[key]) {\n\t\t\t\t\tnode[key] = val\n\t\t\t\t\t//set synthetic events for onUpperCaseName\n\t\t\t\t\tif (key[0] === 'o' && key[1] === 'n' && key.charCodeAt(2) < 91 && key.charCodeAt(2) > 64 && !EVENTS[key]) {\n\t\t\t\t\t\tdocument.addEventListener(key.slice(2).toLowerCase(), function(e) {\n\t\t\t\t\t\t\tvar tgt = e.target\n\t\t\t\t\t\t\tdo if (tgt[key]) return tgt[key](e)\n\t\t\t\t\t\t\twhile((tgt = tgt.parentNode))\n\t\t\t\t\t\t})\n\t\t\t\t\t\tEVENTS[key] = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse node.setAttribute(key, val)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (Array.isArray(arg)) for (var k=0; k<arg.length; ++k) node.appendChild(\n\t\t\t\t\targ[k].nodeType ? arg[k] : document.createTextNode(arg[k])\n\t\t\t\t)\n\t\t\t\telse node.appendChild(arg.nodeType ? arg : document.createTextNode(arg))\n\t\t\t}\n\t\t}\n\t}\n\treturn node\n}\n","export default {}\n","import EVENTS from './src/events.js'\n\n/**\n * @param {string} tagName\n * @return {Element}\n */\nexport default function(tagName) {\n\t//@ts-ignore\n\tvar node = tagName.nodeType === 1 ? tagName : document.createElementNS('http://www.w3.org/2000/svg', tagName)\n\n\tfor (var i=1; i<arguments.length; ++i) {\n\t\tvar arg = arguments[i]\n\t\tif (arg != null) {\n\t\t\t//TODO skip .constructor\n\t\t\tif (!arg.constructor || arg.constructor === Object) for (var j=0, ks=Object.keys(arg); j<ks.length; ++j) {\n\t\t\t\tvar key = ks[j],\n\t\t\t\t\t\tval = arg[key]\n\t\t\t\tif (typeof val !== 'string') {\n\t\t\t\t\tnode[key] = val\n\t\t\t\t\t//set synthetic events for onUpperCaseName\n\t\t\t\t\tif (key[0] === 'o' && key[1] === 'n' && key.charCodeAt(2) < 91 && key.charCodeAt(2) > 64 && !EVENTS[key]) {\n\t\t\t\t\t\tdocument.addEventListener(key.slice(2).toLowerCase(), function(e) { //eslint-disable-line\n\t\t\t\t\t\t\tvar tgt = e.target\n\t\t\t\t\t\t\tdo if (tgt[key]) return tgt[key](e)\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\twhile((tgt = tgt.parentNode))\n\t\t\t\t\t\t})\n\t\t\t\t\t\tEVENTS[key] = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse node.setAttribute(key, val)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (Array.isArray(arg)) for (var k=0; k<arg.length; ++k) node.appendChild(\n\t\t\t\t\targ[k].nodeType ? arg[k] : document.createTextNode(arg[k])\n\t\t\t\t)\n\t\t\t\telse node.appendChild(arg.nodeType ? arg : document.createTextNode(arg))\n\t\t\t}\n\t\t}\n\t}\n\treturn node\n}\n","import { saveAs } from 'file-saver'\r\n//import { readKey, encrypt, createMessage } from 'openpgp'\r\n\r\nexport const equal = (x, y) => x === y\r\n\r\nexport const setClass = (elem, cl, bool) => bool ? elem.classList.add(cl) : elem.classList.remove(cl)\r\n\r\nexport const err = (...args) => {throw new Error(...args)}\r\n\r\nexport const sleep = ms => new Promise(res => setTimeout(res, ms))\r\n\r\nexport const pipe = (x, ...fns) => fns.reduce((acc, fn) => fn(acc), x)\r\n\r\nexport const flow = (...fns) => x => fns.reduce((acc, fn) => fn(acc), x)\r\n\r\nexport const zip = rows => rows[0].map( (_,c) => rows.map( row => row[c] ))\r\n\r\nexport function* take(n, iter) {\r\n    for (const x of iter) {\r\n        if (n < 1) break;\r\n        yield x;\r\n        n -= 1;\r\n    }\r\n}\r\n\r\nexport function setUnion(...sets) {\r\n    const union = new Set(sets.shift())\r\n    for (const currSet of sets) {\r\n        for (const elem of currSet) {\r\n            union.add(elem)\r\n        }\r\n    }\r\n    return union\r\n}\r\n\r\nexport const arrayUnique = (arr) => Array.from(new Set(arr))\r\n\r\nexport function filterObjectByEntry(obj, pred) {\r\n    return Object.fromEntries(Object.entries(obj).filter(pred))\r\n}\r\n\r\nexport function filterObjectByKey(obj, pred) {\r\n    return filterObjectByEntry(obj, ([key, _]) => pred(key))\r\n}\r\n\r\nexport const substituteText =\r\n    (template, context) => template.replaceAll(/{(\\w+)}/g, (match, key) => context[key] ?? match)\r\n\r\nexport class Tree extends Map {\r\n    constructor(root, attributes = {}) {\r\n        super()\r\n\r\n        if (root) {this.setRoot(root, attributes)}\r\n    }\r\n\r\n    root = null\r\n\r\n    setRoot(node, attributes = {}) {\r\n        if (this.root !== null) throw new Error(`root '${this.root}' already exists`)\r\n        this.set(node, Object.assign(attributes, {children: [], parent: null}))\r\n        this.root = node\r\n    }\r\n\r\n    addChild(parent, child, attributes = {}) {\r\n        if (this.get(child) !== undefined) {throw new Error(`child ${child} already exists`)}\r\n        this.get(parent)?.children?.push(child) ?? err(`parent '${parent}' does not exist or is malformed`)\r\n        this.set(child, Object.assign(attributes, {children: [], parent: parent}))\r\n    }\r\n\r\n    deleteNode(node) {\r\n        for (const child of this.get(node).children) {\r\n            this.deleteNode(child)\r\n        }\r\n        this.delete(node)\r\n    }\r\n\r\n    toObject(morphism) {\r\n        if (typeof(morphism) === 'function') {\r\n            return Object.fromEntries(Array.from(this, morphism))\r\n        } else {\r\n            return Object.fromEntries(this)\r\n        }\r\n    }\r\n\r\n    getAncestryOf(node) {\r\n        const ancestry = []\r\n        let parent = this.get(node).parent\r\n        while (parent !== null) {\r\n            ancestry.unshift(parent)\r\n            parent = this.get(parent).parent\r\n        }\r\n        return ancestry\r\n    }\r\n\r\n    // I don't trust this algorithm. Does it have bugs? Is it efficient? Does it cover all edge\r\n    //   cases? No clue. But it's not recursive.\r\n    // Collapses `tree` into a single value using an accumulator function `f` (similar to `reduce`)\r\n    //   optionally starting at subtree `node`. `f` is passed each node except the node's\r\n    //   `children` attribute instead holds the results of applying `f` to the node's children.\r\n    static cata(tree, node = null, f) {\r\n        const newLayer = node => ({node, before: [...tree.get(node).children], after: []})\r\n        const stack = [newLayer(node ?? tree.root)]\r\n\r\n        while (true) {\r\n            if (stack.at(-1).before.length) {\r\n                stack.push(newLayer(stack.at(-1).before.pop()))\r\n            } else {\r\n                const curr = stack.pop()\r\n                const res = f({...tree.get(curr.node), children: curr.after})\r\n                if (!stack.length) return res\r\n                stack.at(-1).after.push(res)\r\n            }\r\n        }\r\n    }\r\n\r\n    static fromGraphBfs(getChildren, root) {\r\n        const tree = new Tree(root)\r\n        const frontier = [root]\r\n\r\n        const addChildOf = (currentNode) => (id, data = {}) => {\r\n            if (!tree.has(id)) {\r\n                frontier.push(id)\r\n                tree.addChild(currentNode, id, data)\r\n            }\r\n        }\r\n\r\n        while (frontier.length > 0) {\r\n            const currentNode = frontier.pop()\r\n            getChildren(addChildOf(currentNode), currentNode)\r\n        }\r\n        return tree\r\n    }\r\n}\r\n\r\n/// HTML ///\r\n\r\nexport const cloneTemplateFrom = (doc) => (templateId) => {\r\n    // NOTE importNode works like cloneNode except it upgrades custom elements. Needed because\r\n    //   it works on template contents, unlike customElements.upgrade.\r\n    const template = doc.importNode(doc.getElementById(templateId).content, true)\r\n    // clear the fragment of extraneous nodes that might break things\r\n    // TODO Apply recursively to comments\r\n    Array.from(template.childNodes).forEach(el => {\r\n        if ((el.nodeName === '#text' && !el.nodeValue.trim()) || el.nodeName === '#comment') {el.remove()}\r\n    })\r\n    return template\r\n}\r\n\r\nexport function parseDoc(docText) {\r\n    return new DOMParser().parseFromString(docText, \"text/html\")\r\n}\r\n\r\nexport function exportObject(obj, filename) {\r\n    saveAs(new Blob([JSON.stringify(obj)], {type: 'application/json'}), filename)\r\n}\r\n\r\nexport async function encryptMessage(armoredPublicKey, text) {\r\n    const { readKey, encrypt, createMessage } = await import('openpgp')\r\n    return await encrypt({\r\n        message: await createMessage({text}),\r\n        encryptionKeys: await readKey({armoredKey: armoredPublicKey})\r\n    })\r\n}","import defineProperty from './_define_property.mjs';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\n\nexport default function _objectSpreadProps(target, source) {\n  source = source != null ? source : {}\n  if (Object.getOwnPropertyDescriptors) {\n    Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n  } else {\n    ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(\n        target,\n        key,\n        Object.getOwnPropertyDescriptor(source, key)\n      );\n    });\n  }\n\n  return target;\n}","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('jaZFP') + require('./helpers/bundle-manifest').resolve(\"cvggw\"))).then(() => parcelRequire('4W4kq'));","\"use strict\";\n\nvar cacheLoader = require('../cacheLoader');\n\nmodule.exports = cacheLoader(function (bundle) {\n  return new Promise(function (resolve, reject) {\n    // Don't insert the same script twice (e.g. if it was already in the HTML)\n    var existingScripts = document.getElementsByTagName('script');\n\n    if ([].concat(existingScripts).some(function isCurrentBundle(script) {\n      return script.src === bundle;\n    })) {\n      resolve();\n      return;\n    }\n\n    var preloadLink = document.createElement('link');\n    preloadLink.href = bundle;\n    preloadLink.rel = 'preload';\n    preloadLink.as = 'script';\n    document.head.appendChild(preloadLink);\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.src = bundle;\n\n    script.onerror = function (e) {\n      var error = new TypeError(\"Failed to fetch dynamically imported module: \".concat(bundle, \". Error: \").concat(e.message));\n      script.onerror = script.onload = null;\n      script.remove();\n      reject(error);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n});","\"use strict\";\n\nvar cachedBundles = {};\nvar cachedPreloads = {};\nvar cachedPrefetches = {};\n\nfunction getCache(type) {\n  switch (type) {\n    case 'preload':\n      return cachedPreloads;\n\n    case 'prefetch':\n      return cachedPrefetches;\n\n    default:\n      return cachedBundles;\n  }\n}\n\nmodule.exports = function (loader, type) {\n  return function (bundle) {\n    var cache = getCache(type);\n\n    if (cache[bundle]) {\n      return cache[bundle];\n    }\n\n    return cache[bundle] = loader.apply(null, arguments).catch(function (e) {\n      delete cache[bundle];\n      throw e;\n    });\n  };\n};","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","'use strict';\n\nvar curryN = require('ramda/src/curryN');\n\n// Utility\nfunction isFunction(obj) {\n  return !!(obj && obj.constructor && obj.call && obj.apply);\n}\nfunction trueFn() { return true; }\n\n// Globals\nvar toUpdate = [];\nvar inStream;\nvar order = [];\nvar orderNextIdx = -1;\nvar flushingUpdateQueue = false;\nvar flushingStreamValue = false;\n\nfunction flushing() {\n  return flushingUpdateQueue || flushingStreamValue;\n}\n\n\n/** @namespace */\nvar flyd = {}\n\n// /////////////////////////// API ///////////////////////////////// //\n\n/**\n * Creates a new stream\n *\n * __Signature__: `a -> Stream a`\n *\n * @name flyd.stream\n * @param {*} initialValue - (Optional) the initial value of the stream\n * @return {stream} the stream\n *\n * @example\n * var n = flyd.stream(1); // Stream with initial value `1`\n * var s = flyd.stream(); // Stream with no initial value\n */\nflyd.stream = function(initialValue) {\n  var endStream = createDependentStream([], trueFn);\n  var s = createStream();\n  s.end = endStream;\n  s.fnArgs = [];\n  endStream.listeners.push(s);\n  if (arguments.length > 0) s(initialValue);\n  return s;\n}\n// fantasy-land Applicative\nflyd.stream['fantasy-land/of'] = flyd.stream.of = flyd.stream;\n\n\n/**\n * Create a new dependent stream\n *\n * __Signature__: `(...Stream * -> Stream b -> b) -> [Stream *] -> Stream b`\n *\n * @name flyd.combine\n * @param {Function} fn - the function used to combine the streams\n * @param {Array<stream>} dependencies - the streams that this one depends on\n * @return {stream} the dependent stream\n *\n * @example\n * var n1 = flyd.stream(0);\n * var n2 = flyd.stream(0);\n * var max = flyd.combine(function(n1, n2, self, changed) {\n *   return n1() > n2() ? n1() : n2();\n * }, [n1, n2]);\n */\nflyd.combine = curryN(2, combine);\nfunction combine(fn, streams) {\n  var i, s, deps, depEndStreams;\n  var endStream = createDependentStream([], trueFn);\n  deps = []; depEndStreams = [];\n  for (i = 0; i < streams.length; ++i) {\n    if (streams[i] !== undefined) {\n      deps.push(streams[i]);\n      if (streams[i].end !== undefined) depEndStreams.push(streams[i].end);\n    }\n  }\n  s = createDependentStream(deps, fn);\n  s.depsChanged = [];\n  s.fnArgs = s.deps.concat([s, s.depsChanged]);\n  s.end = endStream;\n  endStream.listeners.push(s);\n  addListeners(depEndStreams, endStream);\n  endStream.deps = depEndStreams;\n  updateStream(s);\n  return s;\n}\n\n/**\n * Returns `true` if the supplied argument is a Flyd stream and `false` otherwise.\n *\n * __Signature__: `* -> Boolean`\n *\n * @name flyd.isStream\n * @param {*} value - the value to test\n * @return {Boolean} `true` if is a Flyd streamn, `false` otherwise\n *\n * @example\n * var s = flyd.stream(1);\n * var n = 1;\n * flyd.isStream(s); //=> true\n * flyd.isStream(n); //=> false\n */\nflyd.isStream = function(stream) {\n  return isFunction(stream) && 'hasVal' in stream;\n}\n\n/**\n * Invokes the body (the function to calculate the value) of a dependent stream\n *\n * By default the body of a dependent stream is only called when all the streams\n * upon which it depends has a value. `immediate` can circumvent this behaviour.\n * It immediately invokes the body of a dependent stream.\n *\n * __Signature__: `Stream a -> Stream a`\n *\n * @name flyd.immediate\n * @param {stream} stream - the dependent stream\n * @return {stream} the same stream\n *\n * @example\n * var s = flyd.stream();\n * var hasItems = flyd.immediate(flyd.combine(function(s) {\n *   return s() !== undefined && s().length > 0;\n * }, [s]);\n * console.log(hasItems()); // logs `false`. Had `immediate` not been\n *                          // used `hasItems()` would've returned `undefined`\n * s([1]);\n * console.log(hasItems()); // logs `true`.\n * s([]);\n * console.log(hasItems()); // logs `false`.\n */\nflyd.immediate = function(s) {\n  if (s.depsMet === false) {\n    s.depsMet = true;\n    updateStream(s);\n  }\n  return s;\n}\n\n/**\n * Changes which `endsStream` should trigger the ending of `s`.\n *\n * __Signature__: `Stream a -> Stream b -> Stream b`\n *\n * @name flyd.endsOn\n * @param {stream} endStream - the stream to trigger the ending\n * @param {stream} stream - the stream to be ended by the endStream\n * @param {stream} the stream modified to be ended by endStream\n *\n * @example\n * var n = flyd.stream(1);\n * var killer = flyd.stream();\n * // `double` ends when `n` ends or when `killer` emits any value\n * var double = flyd.endsOn(flyd.merge(n.end, killer), flyd.combine(function(n) {\n *   return 2 * n();\n * }, [n]);\n*/\nflyd.endsOn = function(endS, s) {\n  detachDeps(s.end);\n  endS.listeners.push(s.end);\n  s.end.deps.push(endS);\n  return s;\n}\n\n/**\n * Map a stream\n *\n * Returns a new stream consisting of every value from `s` passed through\n * `fn`. I.e. `map` creates a new stream that listens to `s` and\n * applies `fn` to every new value.\n * __Signature__: `(a -> result) -> Stream a -> Stream result`\n *\n * @name flyd.map\n * @param {Function} fn - the function that produces the elements of the new stream\n * @param {stream} stream - the stream to map\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = flyd.map(function(n) { return n*n; }, numbers);\n */\n// Library functions use self callback to accept (null, undefined) update triggers.\nfunction map(f, s) {\n  return combine(function(s, self) { self(f(s.val)); }, [s]);\n}\nflyd.map = curryN(2, map)\n\n/**\n * Chain a stream\n *\n * also known as flatMap\n *\n * Where `fn` returns a stream this function will flatten the resulting streams.\n * Every time `fn` is called the context of the returned stream will \"switch\" to that stream.\n *\n * __Signature__: `(a -> Stream b) -> Stream a -> Stream b`\n *\n * @name flyd.chain\n * @param {Function} fn - the function that produces the streams to be flattened\n * @param {stream} stream - the stream to map\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var filter = flyd.stream('who');\n * var items = flyd.chain(function(filter){\n *   return flyd.stream(findUsers(filter));\n * }, filter);\n */\nflyd.chain = curryN(2, chain);\n\n/**\n * Apply a stream\n *\n * Applies the value in `s2` to the function in `s1`.\n *\n * __Signature__: `Stream (a -> b) -> Stream a -> Stream b`\n *\n * @name flyd.ap\n * @param {stream} s1 - The value to be applied\n * @param {stream} s2 - The function expecting the value\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var add = stream(a => b => a + b)\n * var n1 = stream(1)\n * var n2 = stream(2)\n *\n * var added = flyd.ap(n2, flyd.ap(n1, add)) // stream(3)\n * // can also be written using pipe\n * var added_pipe = add\n *   .pipe(ap(n1))\n *   .pipe(ap(n2));\n * added_pipe() // 3\n */\nflyd.ap = curryN(2, ap);\n\n/**\n * Listen to stream events\n *\n * Similar to `map` except that the returned stream is empty. Use `on` for doing\n * side effects in reaction to stream changes. Use the returned stream only if you\n * need to manually end it.\n *\n * __Signature__: `(a -> result) -> Stream a -> Stream undefined`\n *\n * @name flyd.on\n * @param {Function} cb - the callback\n * @param {stream} stream - the stream\n * @return {stream} an empty stream (can be ended)\n */\nflyd.on = curryN(2, function(f, s) {\n  return combine(function(s) { f(s.val); }, [s]);\n})\n\n/**\n * Creates a new stream with the results of calling the function on every incoming\n * stream with and accumulator and the incoming value.\n *\n * __Signature__: `(a -> b -> a) -> a -> Stream b -> Stream a`\n *\n * @name flyd.scan\n * @param {Function} fn - the function to call\n * @param {*} val - the initial value of the accumulator\n * @param {stream} stream - the stream source\n * @return {stream} the new stream\n *\n * @example\n * var numbers = flyd.stream();\n * var sum = flyd.scan(function(sum, n) { return sum+n; }, 0, numbers);\n * numbers(2)(3)(5);\n * sum(); // 10\n */\nflyd.scan = curryN(3, function(f, acc, s) {\n  var ns = combine(function(s, self) {\n    self(acc = f(acc, s.val));\n  }, [s]);\n  if (!ns.hasVal) ns(acc);\n  return ns;\n});\n\n/**\n * Creates a new stream down which all values from both `stream1` and `stream2`\n * will be sent.\n *\n * __Signature__: `Stream a -> Stream a -> Stream a`\n *\n * @name flyd.merge\n * @param {stream} source1 - one stream to be merged\n * @param {stream} source2 - the other stream to be merged\n * @return {stream} a stream with the values from both sources\n *\n * @example\n * var btn1Clicks = flyd.stream();\n * button1Elm.addEventListener(btn1Clicks);\n * var btn2Clicks = flyd.stream();\n * button2Elm.addEventListener(btn2Clicks);\n * var allClicks = flyd.merge(btn1Clicks, btn2Clicks);\n */\nflyd.merge = curryN(2, function(s1, s2) {\n  var s = flyd.immediate(combine(function(s1, s2, self, changed) {\n    if (changed[0]) {\n      self(changed[0]());\n    } else if (s1.hasVal) {\n      self(s1.val);\n    } else if (s2.hasVal) {\n      self(s2.val);\n    }\n  }, [s1, s2]));\n  flyd.endsOn(combine(function() {\n    return true;\n  }, [s1.end, s2.end]), s);\n  return s;\n});\n\n/**\n * Creates a new stream resulting from applying `transducer` to `stream`.\n *\n * __Signature__: `Transducer -> Stream a -> Stream b`\n *\n * @name flyd.transduce\n * @param {Transducer} xform - the transducer transformation\n * @param {stream} source - the stream source\n * @return {stream} the new stream\n *\n * @example\n * var t = require('transducers.js');\n *\n * var results = [];\n * var s1 = flyd.stream();\n * var tx = t.compose(t.map(function(x) { return x * 2; }), t.dedupe());\n * var s2 = flyd.transduce(tx, s1);\n * flyd.combine(function(s2) { results.push(s2()); }, [s2]);\n * s1(1)(1)(2)(3)(3)(3)(4);\n * results; // => [2, 4, 6, 8]\n */\nflyd.transduce = curryN(2, function(xform, source) {\n  xform = xform(new StreamTransformer());\n  return combine(function(source, self) {\n    var res = xform['@@transducer/step'](undefined, source.val);\n    if (res && res['@@transducer/reduced'] === true) {\n      self.end(true);\n      return res['@@transducer/value'];\n    } else {\n      return res;\n    }\n  }, [source]);\n});\n\n/**\n * Returns `fn` curried to `n`. Use this function to curry functions exposed by\n * modules for Flyd.\n *\n * @name flyd.curryN\n * @function\n * @param {Integer} arity - the function arity\n * @param {Function} fn - the function to curry\n * @return {Function} the curried function\n *\n * @example\n * function add(x, y) { return x + y; };\n * var a = flyd.curryN(2, add);\n * a(2)(4) // => 6\n */\nflyd.curryN = curryN\n\n/**\n * Returns a new stream identical to the original except every\n * value will be passed through `f`.\n *\n * _Note:_ This function is included in order to support the fantasy land\n * specification.\n *\n * __Signature__: Called bound to `Stream a`: `(a -> b) -> Stream b`\n *\n * @name stream.map\n * @param {Function} function - the function to apply\n * @return {stream} a new stream with the values mapped\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = numbers.map(function(n) { return n*n; });\n */\nfunction boundMap(f) { return map(f, this); }\n\n/**\n * Returns the result of applying function `fn` to this stream\n *\n * __Signature__: Called bound to `Stream a`: `(a -> Stream b) -> Stream b`\n *\n * @name stream.pipe\n * @param {Function} fn - the function to apply\n * @return {stream} A new stream\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = numbers.pipe(flyd.map(function(n){ return n*n; }));\n */\nfunction operator_pipe(f) { return f(this) }\n\nfunction boundChain(f) {\n  return chain(f, this);\n}\n\nfunction chain(f, s) {\n  // Internal state to end flat map stream\n  var flatEnd = flyd.stream(1);\n  var internalEnded = flyd.on(function() {\n    var alive = flatEnd() - 1;\n    flatEnd(alive);\n    if (alive <= 0) {\n      flatEnd.end(true);\n    }\n  });\n\n  internalEnded(s.end);\n  var last = flyd.stream();\n  var flatStream = flyd.combine(function(s, own) {\n    last.end(true)\n    // Our fn stream makes streams\n    var newS = f(s());\n    flatEnd(flatEnd() + 1);\n    internalEnded(newS.end);\n\n    // Update self on call -- newS is never handed out so deps don't matter\n    last = map(own, newS);\n  }, [s]);\n\n  flyd.endsOn(flatEnd.end, flatStream);\n\n  return flatStream;\n}\n\nflyd.fromPromise = function fromPromise(p) {\n  var s = flyd.stream();\n  p.then(function(val) {\n    s(val);\n    s.end(true);\n  });\n  return s;\n}\n\nflyd.flattenPromise = function flattenPromise(s) {\n  return combine(function(s, self) {\n    s().then(self);\n  }, [s])\n}\n\n\n/**\n * Returns a new stream which is the result of applying the\n * functions from `this` stream to the values in `stream` parameter.\n *\n * `this` stream must be a stream of functions.\n *\n * _Note:_ This function is included in order to support the fantasy land\n * specification.\n *\n * __Signature__: Called bound to `Stream (a -> b)`: `a -> Stream b`\n *\n * @name stream.ap\n * @param {stream} stream - the values stream\n * @return {stream} a new stream with the functions applied to values\n *\n * @example\n * var add = flyd.curryN(2, function(x, y) { return x + y; });\n * var numbers1 = flyd.stream();\n * var numbers2 = flyd.stream();\n * var addToNumbers1 = flyd.map(add, numbers1);\n * var added = addToNumbers1.ap(numbers2);\n */\nfunction ap(s2, s1) {\n  return combine(function(s1, s2, self) { self(s1.val(s2.val)); }, [s1, s2]);\n}\n\nfunction boundAp(s2) {\n  return ap(s2, this);\n}\n\n/**\n * @private\n */\nfunction fantasy_land_ap(s1) {\n  return ap(this, s1);\n}\n\n/**\n * Get a human readable view of a stream\n * @name stream.toString\n * @return {String} the stream string representation\n */\nfunction streamToString() {\n  return 'stream(' + this.val + ')';\n}\n\n/**\n * @name stream.end\n * @memberof stream\n * A stream that emits `true` when the stream ends. If `true` is pushed down the\n * stream the parent stream ends.\n */\n\n/**\n * @name stream.of\n * @function\n * @memberof stream\n * Returns a new stream with `value` as its initial value. It is identical to\n * calling `flyd.stream` with one argument.\n *\n * __Signature__: Called bound to `Stream (a)`: `b -> Stream b`\n *\n * @param {*} value - the initial value\n * @return {stream} the new stream\n *\n * @example\n * var n = flyd.stream(1);\n * var m = n.of(1);\n */\n\n// /////////////////////////// PRIVATE ///////////////////////////////// //\n/**\n * @private\n * Create a stream with no dependencies and no value\n * @return {Function} a flyd stream\n */\nfunction createStream() {\n  function s(n) {\n    if (arguments.length === 0) return s.val\n    updateStreamValue(n, s)\n    return s\n  }\n  s.hasVal = false;\n  s.val = undefined;\n  s.updaters = [];\n  s.listeners = [];\n  s.queued = false;\n  s.end = undefined;\n\n  // fantasy-land compatibility\n  s.ap = boundAp;\n  s['fantasy-land/map'] = s.map = boundMap;\n  s['fantasy-land/ap'] = fantasy_land_ap;\n  s['fantasy-land/of'] = s.of = flyd.stream;\n  s['fantasy-land/chain'] = s.chain = boundChain;\n\n  s.pipe = operator_pipe;\n\n  // According to the fantasy-land Applicative specification\n  // Given a value f, one can access its type representative via the constructor property:\n  // `f.constructor.of`\n  s.constructor = flyd.stream;\n\n  s.toJSON = function() {\n    return s.val;\n  }\n  s.toString = streamToString;\n  return s;\n}\n\n/**\n * @private\n * Create a dependent stream\n * @param {Array<stream>} dependencies - an array of the streams\n * @param {Function} fn - the function used to calculate the new stream value\n * from the dependencies\n * @return {stream} the created stream\n */\nfunction createDependentStream(deps, fn) {\n  var s = createStream();\n  s.fn = fn;\n  s.deps = deps;\n  s.depsMet = false;\n  s.depsChanged = deps.length > 0 ? [] : undefined;\n  s.shouldUpdate = false;\n  addListeners(deps, s);\n  return s;\n}\n\n/**\n * @private\n * Check if all the dependencies have values\n * @param {stream} stream - the stream to check depencencies from\n * @return {Boolean} `true` if all dependencies have vales, `false` otherwise\n */\nfunction initialDependenciesMet(stream) {\n  stream.depsMet = stream.deps.every(function(s) {\n    return s.hasVal;\n  });\n  return stream.depsMet;\n}\n\nfunction dependenciesAreMet(stream) {\n  return stream.depsMet === true || initialDependenciesMet(stream);\n}\n\nfunction isEnded(stream) {\n  return stream.end && stream.end.val === true;\n}\n\nfunction listenersNeedUpdating(s) {\n  return s.listeners.some(function(s) { return s.shouldUpdate; });\n}\n\n/**\n * @private\n * Update a dependent stream using its dependencies in an atomic way\n * @param {stream} stream - the stream to update\n */\nfunction updateStream(s) {\n  if (isEnded(s) || !dependenciesAreMet(s)) return;\n  if (inStream !== undefined) {\n    updateLaterUsing(updateStream, s);\n    return;\n  }\n  inStream = s;\n  if (s.depsChanged) s.fnArgs[s.fnArgs.length - 1] = s.depsChanged;\n  var returnVal = s.fn.apply(s.fn, s.fnArgs);\n  if (returnVal !== undefined) {\n    s(returnVal);\n  }\n  inStream = undefined;\n  if (s.depsChanged !== undefined) s.depsChanged = [];\n  s.shouldUpdate = false;\n  if (flushing() === false) flushUpdate();\n  if (listenersNeedUpdating(s)) {\n    if (!flushingStreamValue) s(s.val)\n    else {\n      s.listeners.forEach(function(listener) {\n        if (listener.shouldUpdate) updateLaterUsing(updateStream, listener);\n      });\n    }\n  }\n}\n\n/**\n * @private\n * Update the dependencies of a stream\n * @param {stream} stream\n */\nfunction updateListeners(s) {\n  var i, o, list\n  var listeners = s.listeners;\n  for (i = 0; i < listeners.length; ++i) {\n    list = listeners[i];\n    if (list.end === s) {\n      endStream(list);\n    } else {\n      if (list.depsChanged !== undefined) list.depsChanged.push(s);\n      list.shouldUpdate = true;\n      findDeps(list);\n    }\n  }\n  for (; orderNextIdx >= 0; --orderNextIdx) {\n    o = order[orderNextIdx];\n    if (o.shouldUpdate === true) updateStream(o);\n    o.queued = false;\n  }\n}\n\n/**\n * @private\n * Add stream dependencies to the global `order` queue.\n * @param {stream} stream\n * @see updateDeps\n */\nfunction findDeps(s) {\n  var i\n  var listeners = s.listeners;\n  if (s.queued === false) {\n    s.queued = true;\n    for (i = 0; i < listeners.length; ++i) {\n      findDeps(listeners[i]);\n    }\n    order[++orderNextIdx] = s;\n  }\n}\n\nfunction updateLaterUsing(updater, stream) {\n  toUpdate.push(stream);\n  stream.updaters.push(updater);\n  stream.shouldUpdate = true;\n}\n\n/**\n * @private\n */\nfunction flushUpdate() {\n  flushingUpdateQueue = true;\n  while (toUpdate.length > 0) {\n    var stream = toUpdate.shift();\n    var nextUpdateFn = stream.updaters.shift();\n    if (nextUpdateFn && stream.shouldUpdate) nextUpdateFn(stream);\n  }\n  flushingUpdateQueue = false;\n}\n\n/**\n * @private\n * Push down a value into a stream\n * @param {stream} stream\n * @param {*} value\n */\nfunction updateStreamValue(n, s) {\n  s.val = n;\n  s.hasVal = true;\n  if (inStream === undefined) {\n    flushingStreamValue = true;\n    updateListeners(s);\n    if (toUpdate.length > 0) flushUpdate();\n    flushingStreamValue = false;\n  } else if (inStream === s) {\n    markListeners(s, s.listeners);\n  } else {\n    updateLaterUsing(function(s) { updateStreamValue(n, s); }, s);\n  }\n}\n\n/**\n * @private\n */\nfunction markListeners(s, lists) {\n  var i, list;\n  for (i = 0; i < lists.length; ++i) {\n    list = lists[i];\n    if (list.end !== s) {\n      if (list.depsChanged !== undefined) {\n        list.depsChanged.push(s);\n      }\n      list.shouldUpdate = true;\n    } else {\n      endStream(list);\n    }\n  }\n}\n\n/**\n * @private\n * Add dependencies to a stream\n * @param {Array<stream>} dependencies\n * @param {stream} stream\n */\nfunction addListeners(deps, s) {\n  for (var i = 0; i < deps.length; ++i) {\n    deps[i].listeners.push(s);\n  }\n}\n\n/**\n * @private\n * Removes an stream from a dependency array\n * @param {stream} stream\n * @param {Array<stream>} dependencies\n */\nfunction removeListener(s, listeners) {\n  var idx = listeners.indexOf(s);\n  listeners[idx] = listeners[listeners.length - 1];\n  listeners.length--;\n}\n\n/**\n * @private\n * Detach a stream from its dependencies\n * @param {stream} stream\n */\nfunction detachDeps(s) {\n  for (var i = 0; i < s.deps.length; ++i) {\n    removeListener(s, s.deps[i].listeners);\n  }\n  s.deps.length = 0;\n}\n\n/**\n * @private\n * Ends a stream\n */\nfunction endStream(s) {\n  if (s.deps !== undefined) detachDeps(s);\n  if (s.end !== undefined) detachDeps(s.end);\n}\n\n/**\n * @private\n */\n/**\n * @private\n * transducer stream transformer\n */\nfunction StreamTransformer() { }\nStreamTransformer.prototype['@@transducer/init'] = function() { };\nStreamTransformer.prototype['@@transducer/result'] = function() { };\nStreamTransformer.prototype['@@transducer/step'] = function(s, v) { return v; };\n\nmodule.exports = flyd;\n","var _arity = /*#__PURE__*/require('./internal/_arity');\n\nvar _curry1 = /*#__PURE__*/require('./internal/_curry1');\n\nvar _curry2 = /*#__PURE__*/require('./internal/_curry2');\n\nvar _curryN = /*#__PURE__*/require('./internal/_curryN');\n\n/**\n * Returns a curried equivalent of the provided function, with the specified\n * arity. The curried function has two unusual capabilities. First, its\n * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n * following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value [`R.__`](#__) may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is [`R.__`](#__),\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      var sumArgs = (...args) => R.sum(args);\n *\n *      var curriedAddFourNumbers = R.curryN(4, sumArgs);\n *      var f = curriedAddFourNumbers(1, 2);\n *      var g = f(3);\n *      g(4); //=> 10\n */\n\n\nvar curryN = /*#__PURE__*/_curry2(function curryN(length, fn) {\n  if (length === 1) {\n    return _curry1(fn);\n  }\n  return _arity(length, _curryN(length, [], fn));\n});\nmodule.exports = curryN;","function _arity(n, fn) {\n  /* eslint-disable no-unused-vars */\n  switch (n) {\n    case 0:\n      return function () {\n        return fn.apply(this, arguments);\n      };\n    case 1:\n      return function (a0) {\n        return fn.apply(this, arguments);\n      };\n    case 2:\n      return function (a0, a1) {\n        return fn.apply(this, arguments);\n      };\n    case 3:\n      return function (a0, a1, a2) {\n        return fn.apply(this, arguments);\n      };\n    case 4:\n      return function (a0, a1, a2, a3) {\n        return fn.apply(this, arguments);\n      };\n    case 5:\n      return function (a0, a1, a2, a3, a4) {\n        return fn.apply(this, arguments);\n      };\n    case 6:\n      return function (a0, a1, a2, a3, a4, a5) {\n        return fn.apply(this, arguments);\n      };\n    case 7:\n      return function (a0, a1, a2, a3, a4, a5, a6) {\n        return fn.apply(this, arguments);\n      };\n    case 8:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        return fn.apply(this, arguments);\n      };\n    case 9:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        return fn.apply(this, arguments);\n      };\n    case 10:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n        return fn.apply(this, arguments);\n      };\n    default:\n      throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n}\nmodule.exports = _arity;","var _isPlaceholder = /*#__PURE__*/require('./_isPlaceholder');\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\n\nfunction _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n}\nmodule.exports = _curry1;","function _isPlaceholder(a) {\n       return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n}\nmodule.exports = _isPlaceholder;","var _curry1 = /*#__PURE__*/require('./_curry1');\n\nvar _isPlaceholder = /*#__PURE__*/require('./_isPlaceholder');\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\n\nfunction _curry2(fn) {\n  return function f2(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return f2;\n      case 1:\n        return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n          return fn(a, _b);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b);\n        }) : fn(a, b);\n    }\n  };\n}\nmodule.exports = _curry2;","var _arity = /*#__PURE__*/require('./_arity');\n\nvar _isPlaceholder = /*#__PURE__*/require('./_isPlaceholder');\n\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @param {Array} received An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\n\nfunction _curryN(length, received, fn) {\n  return function () {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n      if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n      combined[combinedIdx] = result;\n      if (!_isPlaceholder(result)) {\n        left -= 1;\n      }\n      combinedIdx += 1;\n    }\n    return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));\n  };\n}\nmodule.exports = _curryN;","var flyd = require('../../lib');\n\nfunction dropRepeatsWith(eq, s) {\n  var prev;\n  return flyd.combine(function(s, self) {\n    if (!self.hasVal || !eq(s.val, prev)) {\n      self(s.val);\n      prev = s.val;\n    }\n  }, [s]);\n}\n\nexports.dropRepeats = function(s) {\n  return dropRepeatsWith(strictEq, s);\n};\n\nexports.dropRepeatsWith = flyd.curryN(2, dropRepeatsWith);\n\nfunction strictEq(a, b) {\n  return a === b;\n}\n","module.exports = \"72dea81b27f2943c\";","/**\n * @fileOverview Contains definition of the core graph object.\n */\n\n// TODO: need to change storage layer:\n// 1. Be able to get all nodes O(1)\n// 2. Be able to get number of links O(1)\n\n/**\n * @example\n *  var graph = require('ngraph.graph')();\n *  graph.addNode(1);     // graph has one node.\n *  graph.addLink(2, 3);  // now graph contains three nodes and one link.\n *\n */\nmodule.exports = createGraph;\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates a new graph\n */\nfunction createGraph(options) {\n  // Graph structure is maintained as dictionary of nodes\n  // and array of links. Each node has 'links' property which\n  // hold all links related to that node. And general links\n  // array is used to speed up all links enumeration. This is inefficient\n  // in terms of memory, but simplifies coding.\n  options = options || {};\n  if ('uniqueLinkId' in options) {\n    console.warn(\n      'ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\\n' +\n      'Use `multigraph` option instead\\n',\n      '\\n',\n      'Note: there is also change in default behavior: From now on each graph\\n'+\n      'is considered to be not a multigraph by default (each edge is unique).'\n    );\n\n    options.multigraph = options.uniqueLinkId;\n  }\n\n  // Dear reader, the non-multigraphs do not guarantee that there is only\n  // one link for a given pair of node. When this option is set to false\n  // we can save some memory and CPU (18% faster for non-multigraph);\n  if (options.multigraph === undefined) options.multigraph = false;\n\n  if (typeof Map !== 'function') {\n    // TODO: Should we polyfill it ourselves? We don't use much operations there..\n    throw new Error('ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph');\n  } \n\n  var nodes = new Map();\n  var links = [],\n    // Hash of multi-edges. Used to track ids of edges between same nodes\n    multiEdges = {},\n    suspendEvents = 0,\n\n    createLink = options.multigraph ? createUniqueLink : createSingleLink,\n\n    // Our graph API provides means to listen to graph changes. Users can subscribe\n    // to be notified about changes in the graph by using `on` method. However\n    // in some cases they don't use it. To avoid unnecessary memory consumption\n    // we will not record graph changes until we have at least one subscriber.\n    // Code below supports this optimization.\n    //\n    // Accumulates all changes made during graph updates.\n    // Each change element contains:\n    //  changeType - one of the strings: 'add', 'remove' or 'update';\n    //  node - if change is related to node this property is set to changed graph's node;\n    //  link - if change is related to link this property is set to changed graph's link;\n    changes = [],\n    recordLinkChange = noop,\n    recordNodeChange = noop,\n    enterModification = noop,\n    exitModification = noop;\n\n  // this is our public API:\n  var graphPart = {\n    /**\n     * Adds node to the graph. If node with given id already exists in the graph\n     * its data is extended with whatever comes in 'data' argument.\n     *\n     * @param nodeId the node's identifier. A string or number is preferred.\n     * @param [data] additional data for the node being added. If node already\n     *   exists its data object is augmented with the new one.\n     *\n     * @return {node} The newly added node or node with given id if it already exists.\n     */\n    addNode: addNode,\n\n    /**\n     * Adds a link to the graph. The function always create a new\n     * link between two nodes. If one of the nodes does not exists\n     * a new node is created.\n     *\n     * @param fromId link start node id;\n     * @param toId link end node id;\n     * @param [data] additional data to be set on the new link;\n     *\n     * @return {link} The newly created link\n     */\n    addLink: addLink,\n\n    /**\n     * Removes link from the graph. If link does not exist does nothing.\n     *\n     * @param link - object returned by addLink() or getLinks() methods.\n     *\n     * @returns true if link was removed; false otherwise.\n     */\n    removeLink: removeLink,\n\n    /**\n     * Removes node with given id from the graph. If node does not exist in the graph\n     * does nothing.\n     *\n     * @param nodeId node's identifier passed to addNode() function.\n     *\n     * @returns true if node was removed; false otherwise.\n     */\n    removeNode: removeNode,\n\n    /**\n     * Gets node with given identifier. If node does not exist undefined value is returned.\n     *\n     * @param nodeId requested node identifier;\n     *\n     * @return {node} in with requested identifier or undefined if no such node exists.\n     */\n    getNode: getNode,\n\n    /**\n     * Gets number of nodes in this graph.\n     *\n     * @return number of nodes in the graph.\n     */\n    getNodeCount: getNodeCount,\n\n    /**\n     * Gets total number of links in the graph.\n     */\n    getLinkCount: getLinkCount,\n\n    /**\n     * Synonym for `getLinkCount()`\n     */\n    getLinksCount: getLinkCount,\n    \n    /**\n     * Synonym for `getNodeCount()`\n     */\n    getNodesCount: getNodeCount,\n\n    /**\n     * Gets all links (inbound and outbound) from the node with given id.\n     * If node with given id is not found null is returned.\n     *\n     * @param nodeId requested node identifier.\n     *\n     * @return Array of links from and to requested node if such node exists;\n     *   otherwise null is returned.\n     */\n    getLinks: getLinks,\n\n    /**\n     * Invokes callback on each node of the graph.\n     *\n     * @param {Function(node)} callback Function to be invoked. The function\n     *   is passed one argument: visited node.\n     */\n    forEachNode: forEachNode,\n\n    /**\n     * Invokes callback on every linked (adjacent) node to the given one.\n     *\n     * @param nodeId Identifier of the requested node.\n     * @param {Function(node, link)} callback Function to be called on all linked nodes.\n     *   The function is passed two parameters: adjacent node and link object itself.\n     * @param oriented if true graph treated as oriented.\n     */\n    forEachLinkedNode: forEachLinkedNode,\n\n    /**\n     * Enumerates all links in the graph\n     *\n     * @param {Function(link)} callback Function to be called on all links in the graph.\n     *   The function is passed one parameter: graph's link object.\n     *\n     * Link object contains at least the following fields:\n     *  fromId - node id where link starts;\n     *  toId - node id where link ends,\n     *  data - additional data passed to graph.addLink() method.\n     */\n    forEachLink: forEachLink,\n\n    /**\n     * Suspend all notifications about graph changes until\n     * endUpdate is called.\n     */\n    beginUpdate: enterModification,\n\n    /**\n     * Resumes all notifications about graph changes and fires\n     * graph 'changed' event in case there are any pending changes.\n     */\n    endUpdate: exitModification,\n\n    /**\n     * Removes all nodes and links from the graph.\n     */\n    clear: clear,\n\n    /**\n     * Detects whether there is a link between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     * NOTE: this function is synonim for getLink()\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    hasLink: getLink,\n\n    /**\n     * Detects whether there is a node with given id\n     * \n     * Operation complexity is O(1)\n     * NOTE: this function is synonim for getNode()\n     *\n     * @returns node if there is one; Falsy value otherwise.\n     */\n    hasNode: getNode,\n\n    /**\n     * Gets an edge between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     *\n     * @param {string} fromId link start identifier\n     * @param {string} toId link end identifier\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    getLink: getLink\n  };\n\n  // this will add `on()` and `fire()` methods.\n  eventify(graphPart);\n\n  monitorSubscribers();\n\n  return graphPart;\n\n  function monitorSubscribers() {\n    var realOn = graphPart.on;\n\n    // replace real `on` with our temporary on, which will trigger change\n    // modification monitoring:\n    graphPart.on = on;\n\n    function on() {\n      // now it's time to start tracking stuff:\n      graphPart.beginUpdate = enterModification = enterModificationReal;\n      graphPart.endUpdate = exitModification = exitModificationReal;\n      recordLinkChange = recordLinkChangeReal;\n      recordNodeChange = recordNodeChangeReal;\n\n      // this will replace current `on` method with real pub/sub from `eventify`.\n      graphPart.on = realOn;\n      // delegate to real `on` handler:\n      return realOn.apply(graphPart, arguments);\n    }\n  }\n\n  function recordLinkChangeReal(link, changeType) {\n    changes.push({\n      link: link,\n      changeType: changeType\n    });\n  }\n\n  function recordNodeChangeReal(node, changeType) {\n    changes.push({\n      node: node,\n      changeType: changeType\n    });\n  }\n\n  function addNode(nodeId, data) {\n    if (nodeId === undefined) {\n      throw new Error('Invalid node identifier');\n    }\n\n    enterModification();\n\n    var node = getNode(nodeId);\n    if (!node) {\n      node = new Node(nodeId, data);\n      recordNodeChange(node, 'add');\n    } else {\n      node.data = data;\n      recordNodeChange(node, 'update');\n    }\n\n    nodes.set(nodeId, node);\n\n    exitModification();\n    return node;\n  }\n\n  function getNode(nodeId) {\n    return nodes.get(nodeId);\n  }\n\n  function removeNode(nodeId) {\n    var node = getNode(nodeId);\n    if (!node) {\n      return false;\n    }\n\n    enterModification();\n\n    var prevLinks = node.links;\n    if (prevLinks) {\n      node.links = null;\n      for(var i = 0; i < prevLinks.length; ++i) {\n        removeLink(prevLinks[i]);\n      }\n    }\n\n    nodes.delete(nodeId)\n\n    recordNodeChange(node, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n\n  function addLink(fromId, toId, data) {\n    enterModification();\n\n    var fromNode = getNode(fromId) || addNode(fromId);\n    var toNode = getNode(toId) || addNode(toId);\n\n    var link = createLink(fromId, toId, data);\n\n    links.push(link);\n\n    // TODO: this is not cool. On large graphs potentially would consume more memory.\n    addLinkToNode(fromNode, link);\n    if (fromId !== toId) {\n      // make sure we are not duplicating links for self-loops\n      addLinkToNode(toNode, link);\n    }\n\n    recordLinkChange(link, 'add');\n\n    exitModification();\n\n    return link;\n  }\n\n  function createSingleLink(fromId, toId, data) {\n    var linkId = makeLinkId(fromId, toId);\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function createUniqueLink(fromId, toId, data) {\n    // TODO: Get rid of this method.\n    var linkId = makeLinkId(fromId, toId);\n    var isMultiEdge = multiEdges.hasOwnProperty(linkId);\n    if (isMultiEdge || getLink(fromId, toId)) {\n      if (!isMultiEdge) {\n        multiEdges[linkId] = 0;\n      }\n      var suffix = '@' + (++multiEdges[linkId]);\n      linkId = makeLinkId(fromId + suffix, toId + suffix);\n    }\n\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function getNodeCount() {\n    return nodes.size;\n  }\n\n  function getLinkCount() {\n    return links.length;\n  }\n\n  function getLinks(nodeId) {\n    var node = getNode(nodeId);\n    return node ? node.links : null;\n  }\n\n  function removeLink(link) {\n    if (!link) {\n      return false;\n    }\n    var idx = indexOfElementInArray(link, links);\n    if (idx < 0) {\n      return false;\n    }\n\n    enterModification();\n\n    links.splice(idx, 1);\n\n    var fromNode = getNode(link.fromId);\n    var toNode = getNode(link.toId);\n\n    if (fromNode) {\n      idx = indexOfElementInArray(link, fromNode.links);\n      if (idx >= 0) {\n        fromNode.links.splice(idx, 1);\n      }\n    }\n\n    if (toNode) {\n      idx = indexOfElementInArray(link, toNode.links);\n      if (idx >= 0) {\n        toNode.links.splice(idx, 1);\n      }\n    }\n\n    recordLinkChange(link, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n  function getLink(fromNodeId, toNodeId) {\n    // TODO: Use sorted links to speed this up\n    var node = getNode(fromNodeId),\n      i;\n    if (!node || !node.links) {\n      return null;\n    }\n\n    for (i = 0; i < node.links.length; ++i) {\n      var link = node.links[i];\n      if (link.fromId === fromNodeId && link.toId === toNodeId) {\n        return link;\n      }\n    }\n\n    return null; // no link.\n  }\n\n  function clear() {\n    enterModification();\n    forEachNode(function(node) {\n      removeNode(node.id);\n    });\n    exitModification();\n  }\n\n  function forEachLink(callback) {\n    var i, length;\n    if (typeof callback === 'function') {\n      for (i = 0, length = links.length; i < length; ++i) {\n        callback(links[i]);\n      }\n    }\n  }\n\n  function forEachLinkedNode(nodeId, callback, oriented) {\n    var node = getNode(nodeId);\n\n    if (node && node.links && typeof callback === 'function') {\n      if (oriented) {\n        return forEachOrientedLink(node.links, nodeId, callback);\n      } else {\n        return forEachNonOrientedLink(node.links, nodeId, callback);\n      }\n    }\n  }\n\n  function forEachNonOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      var linkedNodeId = link.fromId === nodeId ? link.toId : link.fromId;\n\n      quitFast = callback(nodes.get(linkedNodeId), link);\n      if (quitFast) {\n        return true; // Client does not need more iterations. Break now.\n      }\n    }\n  }\n\n  function forEachOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      if (link.fromId === nodeId) {\n        quitFast = callback(nodes.get(link.toId), link)\n        if (quitFast) {\n          return true; // Client does not need more iterations. Break now.\n        }\n      }\n    }\n  }\n\n  // we will not fire anything until users of this library explicitly call `on()`\n  // method.\n  function noop() {}\n\n  // Enter, Exit modification allows bulk graph updates without firing events.\n  function enterModificationReal() {\n    suspendEvents += 1;\n  }\n\n  function exitModificationReal() {\n    suspendEvents -= 1;\n    if (suspendEvents === 0 && changes.length > 0) {\n      graphPart.fire('changed', changes);\n      changes.length = 0;\n    }\n  }\n\n  function forEachNode(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Function is expected to iterate over graph nodes. You passed ' + callback);\n    }\n\n    var valuesIterator = nodes.values();\n    var nextValue = valuesIterator.next();\n    while (!nextValue.done) {\n      if (callback(nextValue.value)) {\n        return true; // client doesn't want to proceed. Return.\n      }\n      nextValue = valuesIterator.next();\n    }\n  }\n}\n\n// need this for old browsers. Should this be a separate module?\nfunction indexOfElementInArray(element, array) {\n  if (!array) return -1;\n\n  if (array.indexOf) {\n    return array.indexOf(element);\n  }\n\n  var len = array.length,\n    i;\n\n  for (i = 0; i < len; i += 1) {\n    if (array[i] === element) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n * Internal structure to represent node;\n */\nfunction Node(id, data) {\n  this.id = id;\n  this.links = null;\n  this.data = data;\n}\n\nfunction addLinkToNode(node, link) {\n  if (node.links) {\n    node.links.push(link);\n  } else {\n    node.links = [link];\n  }\n}\n\n/**\n * Internal structure to represent links;\n */\nfunction Link(fromId, toId, data, id) {\n  this.fromId = fromId;\n  this.toId = toId;\n  this.data = data;\n  this.id = id;\n}\n\nfunction makeLinkId(fromId, toId) {\n  return fromId.toString() + ' ' + toId.toString();\n}\n","module.exports = function eventify(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jaZFP\\\":\\\"index.0ca65f51.js\\\",\\\"cvggw\\\":\\\"openpgp.min.671dbe5c.js\\\"}\"));"],"names":["$9ad9d7c1d638eb52$export$6503ec6e8aabbaf","$9ad9d7c1d638eb52$export$f7ad0328861e2f03","$9ad9d7c1d638eb52$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$2MZ90","parcelRequire","OBFUSCATED_FORMSPREE_ENDPOINT","DATA_URL","cloneTemplate","$cixNf","cloneTemplateFrom","document","customElements","define","$jPFnF","ClosingDetails","extends","TabPanel","TabGroup","TagList","ModalOverlay","DialogPrompt","Toast","getElementById","addEventListener","_","body","append","feedback","navigator","userAgent","privacy","e","switchToStory","target","files","dragDropOverlay","feedbackForm","toast","text","lingerTime","arguments","createElement","setAttribute","askToConfirm","filename","_askToConfirm","apply","this","default","$parcel$interopDefault","$5ZzSx","mark","_callee","Promise","res","rej","respond","response","currentTarget","dispatchEvent","closeRequest","template","prompt","querySelector","textContent","substituteText","sidebarMenu","tale","state","routeTree","settings","history","passage","title","curr","close","tagEditor","value","gatherTags","join","psg","get","modifiedTags","split","exportObject","extractMetadata","buildFeedback","debugInfo","includeDebugInfo","disabled","checked","submit","type","preventDefault","feedbackID","$FPA49","nanoid","data","FormData","subject","$lFx0k","entries","map","param","_param","feedbackPreview","firstChild","gatherDebugInfo","gatherTagChanges","form","encryptMessage","$d2lOa","then","encryptedBody","sendFormspree","reset","catch","msg","alert","retrospective","ref","ref1","ref2","innerText","link","ontoggle","_target","open","prepend","getAncestryOf","pastPassage","choice","render","passageTagViewer","tags","tagViewer","inlineTagViewer","passageTags","routeTags","_instance","ref3","_modifiedTags","ref4","recursive","arrayUnique","Tree","cata","node","concat","children","_sendFormspree","errMsg","data1","fetch","atob","method","headers","Accept","_ctx","sent","ok","json","hasOwn","error","JSON","stringify","deviousVersion","currentPassage","fromEntries","filter","hasOwnProperty","file","_switchToStory","storyText","storyDoc","parseDoc","name","hideLanding","loadDocIntoDom","injectDigitizerFeatures","classList","add","doc","head","insertAdjacentHTML","innerHTML","querySelectorAll","forEach","s","eval","Event","_injectDigitizerFeatures","store","passages","DMChars","metadataName","metadata","passageGraph","window","some","has","err","buildPassageGraph","fromGraphBfs","addChild","currentChild","forEachLinkedNode","child","assign","key","set","display","source","callback","CustomEvent","detail","getPrototypeOf","parent","annotateLinksWithTheirTarget","addLinkTagLists","stopPropagation","dataTransfer","getLinks","Array","from","matchAll","storeArea","g","$kalkp","titles","Set","el","getAttribute","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_step1","_iterator1","_value","addLink","return","err1","passageBody","linkTargets","links","take","zip","$lGf6G","before","include","strip","filterObjectByKey","toObject","$4fdd60c34502b0a3$var$asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","$4fdd60c34502b0a3$export$2e2bcd8739ae039","fn","self","args","$9T0x6","$99b366d8436eacc1$export$2e2bcd8739ae039","arr","$hOOUp","$46h2R","$62v2q","$f3beb06ca90b1bf3$export$2e2bcd8739ae039","isArray","$b227b1a1b2cc3319$export$2e2bcd8739ae039","iter","$408e968483579ac8$export$2e2bcd8739ae039","TypeError","$i3s4E","$f69b7d5a7a1333f6$export$2e2bcd8739ae039","o","minLen","n","prototype","toString","call","slice","constructor","test","$aff1f1e2959a68c4$export$2e2bcd8739ae039","len","arr2","$6nvpa","$bf39e3a499a0d5d8$export$2e2bcd8739ae039","$3zszv","$e5b73b73464c936e$export$2e2bcd8739ae039","$4426a9dd1eb8d5d9$export$2e2bcd8739ae039","$45ce7afea210c196$var$runtime","exports","obj","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","record","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","abrupt","GenStateSuspendedYield","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","values","iterable","iteratorMethod","iteratorSymbol","isNaN","Op","$Symbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","resultName","nextLoc","displayName","isGeneratorFunction","genFun","ctor","setPrototypeOf","__proto__","awrap","async","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","$07dbd74de6c04caf$export$ac4959f4f1338dfc","size","crypto","getRandomValues","Uint8Array","reduce","byte","toUpperCase","$ddF4S","$e702e114f593b1e4$var$stream","$ln5rx","stream","$e702e114f593b1e4$var$combine","streams","combine","$e702e114f593b1e4$var$updateAttribute","srm","attr","pipe","$8b7cE","dropRepeats","on","x","$e702e114f593b1e4$export$ee7265346f578d9d","HTMLDetailsElement1","_closeIfUnfocused","_this","contains","elementFromPoint","clientX","clientY","removeEventListener","$4oKKp","HTMLDetailsElement","$e702e114f593b1e4$export$3d96ec278d3efce4","HTMLElement1","$2duWZ","group","chain","active","idChanged","gActive","setClass","attachShadow","mode","shadowRoot","$iiqW2","role","parentElement","$e702e114f593b1e4$export$85fd4ed3b8ca1010","oldVal","newVal","HTMLElement","tabs","replaceChildren","tab","class","onclick","defaultTabTitle","part","assignedElements","HTMLUListElement1","$eGMIa","tag","$haNlg","HTMLUListElement","$iXoyT","$iZSGc","_super","remove","onsubmit","$a8f44f00d5c45beb$export$2e2bcd8739ae039","ReferenceError","$9c512c3e283cfc6a$export$2e2bcd8739ae039","instance","Constructor","$64d1191006cc0aa6$var$_defineProperties","props","descriptor","$64d1191006cc0aa6$export$2e2bcd8739ae039","protoProps","staticProps","$18f86f16036ada52$export$2e2bcd8739ae039","$2a3dS","$ec53d8038147e32d$export$2e2bcd8739ae039","subClass","superClass","$5206359c028d31f2$var$setPrototypeOf","p","$5206359c028d31f2$export$2e2bcd8739ae039","$kJiL2","$2312a593b26b2ac2$var$wrapNativeSuper","Class","_cache","Map","$hF9lH","Wrapper","$4j2oH","$2312a593b26b2ac2$export$2e2bcd8739ae039","$423868f6f24fd32f$var$isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","$423868f6f24fd32f$var$construct","Parent","a","bind","$423868f6f24fd32f$export$2e2bcd8739ae039","$84e9bcec1a04384c$export$2e2bcd8739ae039","indexOf","$16db364db89c92ed$var$getPrototypeOf","$16db364db89c92ed$export$2e2bcd8739ae039","$lbbUl","$b354495871b7f8da$export$2e2bcd8739ae039","Derived","hasNativeReflectConstruct","Super","NewTarget","$aJcpA","$776138bee2a012a9$export$2e2bcd8739ae039","Boolean","valueOf","$87c526bb3987a189$export$2e2bcd8739ae039","$7Kswr","$048b10f4af0bf0cb$export$2e2bcd8739ae039","$lMVrw","$d51ecd2b1d9c0d1f$var$htmlProps","nodeValue","className","tabIndex","$d51ecd2b1d9c0d1f$export$2e2bcd8739ae039","tagName","_arguments","ks","j","val","style","cssText","charCodeAt","toLowerCase","tgt","parentNode","k","appendChild","nodeType","createTextNode","_loop","$fdcaa3a528802fc4$export$2e2bcd8739ae039","$8f41611a449c55bb$export$b7df5d561049483a","$8f41611a449c55bb$export$2796c4ce44e61efa","elem","cl","bool","$8f41611a449c55bb$export$8048b892d651b310","_len","_key","$8f41611a449c55bb$export$e772c8ff12451969","ms","setTimeout","$8f41611a449c55bb$export$a4627e546088548d","fns","acc","$8f41611a449c55bb$export$8901015135f2fb22","rows","c","row","t0","$8f41611a449c55bb$var$_key","$8f41611a449c55bb$export$7bf6fd20e75fd96","$8f41611a449c55bb$export$cf80d7b87eda7a5b","pred","$8f41611a449c55bb$export$485830fe756029f5","$8f41611a449c55bb$export$f7404bda8d1e381c","replaceAll","match","$8f41611a449c55bb$export$7fbedc92909ed28e","Map1","root","attributes","setRoot","deleteNode","delete","morphism","ancestry","unshift","tree","f","newLayer","after","stack","at","$83BcQ","$7ms89","getChildren","frontier","addChildOf","currentNode","$8f41611a449c55bb$export$42e04a57be803477","templateId","importNode","content","childNodes","nodeName","trim","$8f41611a449c55bb$export$5db361593220645","docText","DOMParser","parseFromString","$8f41611a449c55bb$export$ac1f1552ea16f7d5","$19YAp","saveAs","Blob","$8f41611a449c55bb$export$802132930513888b","armoredPublicKey","$8f41611a449c55bb$var$_encryptMessage","readKey","encrypt","createMessage","armoredKey","message","t1","encryptionKeys","t2","t3","$0ae600b62ef7701e$export$2e2bcd8739ae039","ownKeys","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","$702b4a5c8aa2844f$export$2e2bcd8739ae039","getOwnPropertyDescriptors","defineProperties","enumerableOnly","symbols","$702b4a5c8aa2844f$var$ownKeys","b","c1","d","XMLHttpRequest","responseType","onload","onerror","console","send","a1","status","MouseEvent","createEvent","initMouseEvent","$parcel$global","global","HTMLAnchorElement","h","URL","webkitURL","download","rel","href","origin","location","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","b1","autoBom","warn","safari","FileReader","onloadend","replace","readAsDataURL","l","m","amd","getBundleURL","$3MQhM","bundle","existingScripts","getElementsByTagName","script","src","preloadLink","as","$2c1e69a33462046d$var$cachedBundles","$2c1e69a33462046d$var$cachedPreloads","$2c1e69a33462046d$var$cachedPrefetches","$2c1e69a33462046d$var$getCache","loader","cache","$e775e1d75f806535$export$bdfd709ae4826697","$e775e1d75f806535$var$bundleURL","$e775e1d75f806535$var$getBaseURL","url","matches","$e775e1d75f806535$var$getBundleURL","$f8eff7dcc0e50852$var$trueFn","$f8eff7dcc0e50852$var$inStream","$f8eff7dcc0e50852$var$toUpdate","$f8eff7dcc0e50852$var$order","$f8eff7dcc0e50852$var$orderNextIdx","$f8eff7dcc0e50852$var$flushingUpdateQueue","$f8eff7dcc0e50852$var$flushingStreamValue","$f8eff7dcc0e50852$var$flyd","$f8eff7dcc0e50852$var$combine","deps","depEndStreams","endStream","$f8eff7dcc0e50852$var$createDependentStream","end","depsChanged","fnArgs","listeners","$f8eff7dcc0e50852$var$addListeners","$f8eff7dcc0e50852$var$updateStream","$f8eff7dcc0e50852$var$map","$f8eff7dcc0e50852$var$boundMap","$f8eff7dcc0e50852$var$operator_pipe","$f8eff7dcc0e50852$var$boundChain","$f8eff7dcc0e50852$var$chain","flatEnd","internalEnded","alive","last","flatStream","own","newS","endsOn","$f8eff7dcc0e50852$var$ap","s2","s1","$f8eff7dcc0e50852$var$boundAp","$f8eff7dcc0e50852$var$fantasy_land_ap","$f8eff7dcc0e50852$var$streamToString","$f8eff7dcc0e50852$var$createStream","$f8eff7dcc0e50852$var$updateStreamValue","hasVal","updaters","queued","ap","of","toJSON","depsMet","shouldUpdate","every","$f8eff7dcc0e50852$var$initialDependenciesMet","$f8eff7dcc0e50852$var$dependenciesAreMet","returnVal","$f8eff7dcc0e50852$var$flushUpdate","$f8eff7dcc0e50852$var$listenersNeedUpdating","listener","$f8eff7dcc0e50852$var$updateLaterUsing","$f8eff7dcc0e50852$var$findDeps","updater","shift","nextUpdateFn","list","$f8eff7dcc0e50852$var$endStream","$f8eff7dcc0e50852$var$updateListeners","lists","$f8eff7dcc0e50852$var$markListeners","$f8eff7dcc0e50852$var$removeListener","idx","$f8eff7dcc0e50852$var$detachDeps","$f8eff7dcc0e50852$var$StreamTransformer","initialValue","$jUFbb","isStream","immediate","endS","scan","ns","merge","changed","transduce","xform","curryN","fromPromise","flattenPromise","v","$jrOAX","$e7f330a9a8037920$var$curryN","$7IBWQ","$7sJyH","$69ymr","a0","a2","a3","a4","a5","a6","a7","a8","a9","$5bhFk","f1","f2","_b","_a","$47ae3cb6fe975576$var$_curryN","received","combined","argsIdx","left","combinedIdx","$5f44f02e0f38e107$export$f42b5f849eadee29","$5f44f02e0f38e107$var$dropRepeatsWith","eq","$5f44f02e0f38e107$var$strictEq","options","recordLinkChangeReal","changeType","changes","recordNodeChangeReal","addNode","nodeId","enterModification","getNode","recordNodeChange","$eae549276f7353b3$var$Node","nodes","exitModification","removeNode","prevLinks","removeLink","getNodeCount","getLinkCount","$eae549276f7353b3$var$indexOfElementInArray","splice","fromNode","fromId","toNode","toId","recordLinkChange","getLink","fromNodeId","toNodeId","forEachNonOrientedLink","linkedNodeId","forEachOrientedLink","noop","enterModificationReal","suspendEvents","exitModificationReal","graphPart","fire","forEachNode","valuesIterator","nextValue","multigraph","uniqueLinkId","multiEdges","createLink","linkId","$eae549276f7353b3$var$makeLinkId","isMultiEdge","suffix","$eae549276f7353b3$var$Link","$eae549276f7353b3$var$addLinkToNode","getLinksCount","getNodesCount","oriented","forEachLink","beginUpdate","endUpdate","clear","hasLink","hasNode","$5CkbI","realOn","monitorSubscribers","element","array","reservedWords","$4170293e4d0e08c7$var$validateSubject","eventsStorage","registeredEvents","eventName","ctx","handlers","off","callbacks","fireArguments","callbackInfo","$4170293e4d0e08c7$var$createEventsStorage","register","parse"],"version":3,"file":"index.0ca65f51.js.map"}