{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","js/main.js","node_modules/nanoid/index.browser.js","js/components.js","node_modules/@swc/helpers/src/_define_property.mjs","node_modules/attodom/index.js","node_modules/attodom/el.js","node_modules/attodom/src/events.js","node_modules/attodom/svg.js","js/utilities.js","node_modules/@swc/helpers/src/_object_spread.mjs","node_modules/@swc/helpers/src/_object_spread_props.mjs","node_modules/file-saver/src/FileSaver.js","node_modules/@parcel/runtime-js/lib/runtime-bb981c9c589bb95a.js","node_modules/@parcel/runtime-js/lib/helpers/browser/import-polyfill.js","node_modules/@parcel/runtime-js/lib/helpers/cacheLoader.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/flyd/lib/index.js","node_modules/ramda/src/curryN.js","node_modules/ramda/src/internal/_arity.js","node_modules/ramda/src/internal/_curry1.js","node_modules/ramda/src/internal/_isPlaceholder.js","node_modules/ramda/src/internal/_curry2.js","node_modules/ramda/src/internal/_curryN.js","node_modules/flyd/module/droprepeats/index.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-5aca51176811bf99.js","node_modules/ngraph.graph/index.js","node_modules/ngraph.events/index.js","node_modules/@parcel/runtime-js/lib/runtime-0ec17db46650058e.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { nanoid } from 'nanoid'\r\nconst createGraph = require('ngraph.graph')\r\nimport { ClosingDetails, TabPanel, TabGroup, TagList, ModalOverlay, DialogPrompt, Toast,\r\n          } from './components.js'\r\nimport { err, zip, equal, take, arrayUnique, filterObjectByKey, substituteText, Tree, bfsTree,\r\n          cloneTemplateFrom, parseDoc, exportObject, encryptMessage } from './utilities.js'\r\n\r\nimport PUBLIC_KEY from 'bundle-text:../pubkey.asc'\r\nconst OBFUSCATED_FORMSPREE_ENDPOINT = \"aHR0cHM6Ly9mb3Jtc3ByZWUuaW8vZi9tYmp3cGRwdw==\"\r\nconst DATA_URL = \"https://devious-digitizer-data.netlify.app/\"\r\n\r\nconst cloneTemplate = cloneTemplateFrom(document)\r\n\r\ncustomElements.define('closing-details', ClosingDetails, {extends: 'details'})\r\ncustomElements.define('tab-panel', TabPanel)\r\ncustomElements.define('tab-group', TabGroup)\r\ncustomElements.define('tag-list', TagList, {extends: 'ul'})\r\ncustomElements.define('modal-overlay', ModalOverlay)\r\ncustomElements.define('dialog-prompt', DialogPrompt)\r\ncustomElements.define('toast-box', Toast)\r\n\r\n//document.getElementById('landing_settings_link').addEventListener(\r\n//    'click',\r\n//    _ => document.body.append(settings(state.history[0].passage.title, routeTree))\r\n//)\r\ndocument.getElementById('landing_feedback_link').addEventListener(\r\n    'click',\r\n    _ => document.body.append(feedback(null, null, null, navigator.userAgent))\r\n)\r\ndocument.getElementById('landing_privacy_link').addEventListener(\r\n    'click',\r\n    _ => document.body.append(privacy())\r\n)\r\n\r\ndocument.getElementById('file_select').addEventListener('change', e => switchToStory(e.target.files[0]))\r\n\r\nconst dragDropOverlay = document.getElementById('drag_drop_overlay')\r\ndocument.body.addEventListener('dragenter', e => {\r\n    // TODO make nice drag drop overlay\r\n    // new Overlay(null, ['Drag-and-drop icon goes here'])._overlay.open(document.body)\r\n    e.preventDefault()\r\n})\r\ndocument.body.addEventListener('dragover', e => e.preventDefault())\r\ndocument.body.addEventListener('dragleave', _ => {\r\n    // document.querySelector('.drag_drop_overlay').close()\r\n})\r\ndocument.body.addEventListener('drop', e => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    if (e.dataTransfer.files) switchToStory(e.dataTransfer.files[0])\r\n})\r\n\r\n\r\n/// TEMPLATES ///\r\n\r\n// FIX fadeTime is unimplemented\r\nfunction toast(text, lingerTime = 3, fadeTime = 1) {\r\n    const toast = document.createElement('toast-box')\r\n    toast.setAttribute('text', text)\r\n    toast.setAttribute('linger-time', lingerTime)\r\n    //toast.setAttribute('fade-time', fadeTime)\r\n    return toast\r\n}\r\n\r\n// modal prompt: \"file does not appear to be a Devious World or Devious Mundanity file\".\r\n//      options: cancel (return false), try anyway (return true), clicking away is same as cancel\r\nasync function askToConfirm(filename) {\r\n    return new Promise((res, rej) => {\r\n        const respond = response => e => {\r\n            if (e.target == e.currentTarget) {\r\n                e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n                res(response)\r\n            }\r\n        }\r\n\r\n        const template = cloneTemplate('confirmation_template')\r\n\r\n        const prompt = template.querySelector('.confirm_prompt')\r\n        prompt.textContent = substituteText(prompt.textContent, {filename})\r\n        template.querySelector('modal-overlay').addEventListener('click', respond(false))\r\n        template.querySelector('.cancel').addEventListener('click', respond(false))\r\n        template.querySelector('.try_anyway').addEventListener('click', respond(true))\r\n\r\n        document.body.append(template)\r\n    })\r\n}\r\n\r\nfunction sidebarMenu(tale, state, routeTree, userAgent) {\r\n    const template = cloneTemplate('sidebar_menu_template')\r\n\r\n    template.querySelector('.settings_link').addEventListener(\r\n        'click',\r\n        _ => document.body.append(settings(state.history[0].passage.title, routeTree))\r\n    )\r\n\r\n    template.querySelector('.feedback_link').addEventListener(\r\n        'click',\r\n        _ => document.body.append(feedback(tale, state, routeTree, userAgent))\r\n    )\r\n\r\n    template.querySelector('.privacy_link').addEventListener(\r\n        'click',\r\n        _ => document.body.append(privacy())\r\n    )\r\n\r\n    return template\r\n}\r\n\r\nfunction settings(curr, routeTree) {\r\n    const template = cloneTemplate('settings_template')\r\n\r\n    const close = e => {\r\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n    }\r\n    template.querySelector('modal-overlay').addEventListener('click', close)\r\n    template.querySelector('.close_settings').addEventListener('click', close)\r\n\r\n    const tagEditor = template.querySelector('.tag_editor')\r\n    tagEditor.value = gatherTags(curr, routeTree).join(' ')\r\n\r\n    template.querySelector('.save_tags').addEventListener('click', _ => {\r\n        const psg = routeTree.get(curr)\r\n        if (psg) psg.modifiedTags = tagEditor.value.split(' ')\r\n        document.body.append(toast(\"tags saved!\", 2))\r\n    })\r\n\r\n    // TODO? Add \"revert tags\" button\r\n\r\n    template.querySelector('.export_metadata').addEventListener('click', _ =>\r\n        exportObject(extractMetadata(routeTree), 'metadata.json'))\r\n\r\n    return template\r\n}\r\n\r\n// Caches form to make filled-in info persistent\r\nlet feedbackForm\r\nfunction buildFeedback() {\r\n    const template = cloneTemplate('feedback_template')\r\n\r\n    const close = e => {\r\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n    }\r\n    template.querySelector('modal-overlay').addEventListener('click', close)\r\n    template.querySelector('.close_feedback').addEventListener('click', close)\r\n    \r\n    // give a visual indicator that debug_info is being disabled\r\n    const debugInfo = template.querySelector('.debug_info')\r\n    const includeDebugInfo = template.querySelector('.include_debug_info')\r\n    includeDebugInfo.addEventListener('change', _ => {debugInfo.disabled = !includeDebugInfo.checked})\r\n    \r\n    const submit = type => e => {\r\n        e.preventDefault()\r\n        \r\n        const feedbackID = `${type}-${nanoid(6)}`\r\n        \r\n        // disable debug info when requested so it is not included in BUG feedback messages\r\n        debugInfo.disabled = !includeDebugInfo.checked\r\n        \r\n        const data = new FormData(e.target)\r\n        data.append('id', feedbackID)\r\n        \r\n        const subject = `Devious Digitizer Feedback ${feedbackID}`\r\n        const body = [...data.entries()].map(([k, v]) => `${k}: ${v}`).join('\\n\\n')\r\n        \r\n        document.body.append(feedbackPreview(subject, body, e.target))\r\n    }\r\n    template.querySelector('.bug_report').addEventListener('submit', submit('BUG'))\r\n    template.querySelector('.feature_request').addEventListener('submit', submit('REQ'))\r\n    template.querySelector('.help_request').addEventListener('submit', submit('HLP'))\r\n    template.querySelector('.submit_tags').addEventListener('submit', submit('TAG'))\r\n\r\n    return template\r\n}\r\n\r\nfunction feedback(tale, state, routeTree, userAgent) {\r\n    feedbackForm ??= buildFeedback().firstChild\r\n    \r\n    feedbackForm.querySelector('.debug_info').textContent = gatherDebugInfo(tale, state, userAgent)\r\n    \r\n    if (routeTree !== null) {\r\n        feedbackForm.querySelector('.tag_changes').textContent = gatherTagChanges(routeTree)\r\n    }\r\n    \r\n    return feedbackForm\r\n}\r\n\r\nfunction feedbackPreview(subject, body, form) {\r\n    const template = cloneTemplate('feedback_preview_template')\r\n    \r\n    template.querySelector('.subject').textContent = subject\r\n    template.querySelector('.body').textContent = body\r\n    \r\n    const close = e => {\r\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n    }\r\n    template.querySelector('modal-overlay').addEventListener('click', close)\r\n    template.querySelector('.cancel').addEventListener('click', close)\r\n    \r\n    template.querySelector('.submit').addEventListener('click', e => {\r\n        encryptMessage(PUBLIC_KEY, body)\r\n            .then(encryptedBody => sendFormspree(subject, encryptedBody))\r\n            .then(_ => {\r\n                form.reset()\r\n                e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n                document.body.append(toast(\"feedback sent successfully ^_^\"))\r\n            })\r\n            .catch(msg => alert(`something went wrong:\\n${msg}`))\r\n    })\r\n    \r\n    return template\r\n}\r\n\r\nfunction privacy() {\r\n    const template = cloneTemplate('privacy_template')\r\n    \r\n    const close = e => {\r\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\r\n    }\r\n    template.querySelector('modal-overlay').addEventListener('click', close)\r\n    template.querySelector('.close_privacy').addEventListener('click', close)\r\n    \r\n    return template\r\n}\r\n\r\nfunction retrospective(curr, routeTree, tale) {\r\n    const template = cloneTemplate('retrospective_template')\r\n\r\n    template.querySelector('.choice--current').innerText = routeTree.get(curr)?.link?.text ?? ''\r\n\r\n    template.querySelector('.past_passages').ontoggle = (e) => {\r\n        if (e.target.open) {\r\n            e.target.ontoggle = null\r\n            e.target.prepend(\r\n                ...routeTree\r\n                .getAncestryOf(curr)\r\n                .map(title => pastPassage(routeTree.get(title)?.link?.text ?? 'Start', tale.get(title))))\r\n        }\r\n    }\r\n\r\n    return template\r\n}\r\n\r\nfunction pastPassage(choice, psg) {\r\n    const template = cloneTemplate('past_passage_template')\r\n\r\n    template.querySelector('.choice--past').innerText = choice\r\n    template.querySelector('.past_passage__text').append(psg.render().querySelector('.body.content'))\r\n\r\n    return template\r\n}\r\n\r\nfunction passageTagViewer(tags) {\r\n    const tagViewer = cloneTemplate('tag_viewer_template')\r\n    tagViewer.querySelector('.tag_list').tags(tags)\r\n\r\n    return tagViewer\r\n}\r\n\r\nfunction inlineTagViewer(passageTags, routeTags) {\r\n    const tagViewer = cloneTemplate('inline_tag_viewer_template')\r\n    tagViewer.querySelector('.tag_list--passage').tags(passageTags)\r\n    tagViewer.querySelector('.tag_list--route').tags(routeTags)\r\n\r\n    return tagViewer\r\n}\r\n\r\n\r\n/// Devious Digitizer ///\r\n\r\nfunction gatherTags(title, routeTree, recursive = false) {\r\n    if (!recursive) return routeTree.get(title)?.modifiedTags ?? routeTree.get(title)?.tags ?? []\r\n    return arrayUnique(\r\n        Tree.cata(\r\n            routeTree,\r\n            title,\r\n            node => (node.modifiedTags ?? node.tags ?? []).concat(...node.children)\r\n        )\r\n    )\r\n        // arrayUnique([...(node.tags ?? []), ...node.children.flatMap(child => gatherTags(child, routeTree, true))])\r\n}\r\n\r\nasync function sendFormspree(subject, body) {\r\n    const data = new FormData()\r\n    data.append('subject', subject)\r\n    data.append('body', body)\r\n    \r\n    const response = await fetch(atob(OBFUSCATED_FORMSPREE_ENDPOINT), {\r\n        method: 'POST',\r\n        body: data,\r\n        headers: {\r\n            'Accept': 'application/json'\r\n        }\r\n    })\r\n    if (!response.ok) {\r\n        const errMsg = \"There was a problem while trying to send your feedback. Please try again in a moment.\"\r\n        const data = await response.json()\r\n        if (Object.hasOwn(data, 'errors')) {\r\n            throw new Error(errMsg + data[\"errors\"].map(error => error[\"message\"]).join(\", \"))\r\n        } else {\r\n            throw new Error(errMsg)\r\n        }\r\n    }\r\n}\r\n\r\nfunction gatherDebugInfo(tale, state, userAgent) {\r\n    return JSON.stringify({\r\n        userAgent,\r\n        deviousVersion: tale?.title,\r\n        currentPassage: state ? state.history[0].passage.title : null,\r\n        // TODO version of Devious Digitizer\r\n        // TODO version of tags\r\n    }, null, 2)\r\n}\r\n\r\nfunction gatherTagChanges(routeTree) {\r\n    return JSON.stringify(\r\n        Object.fromEntries(\r\n            [...routeTree]\r\n            .filter(([k,v]) => v.hasOwnProperty('modifiedTags'))\r\n            .map(([k,v]) => [k, v.modifiedTags])\r\n        ),\r\n        null,\r\n        2,\r\n    )\r\n}\r\n\r\nasync function switchToStory(file) {\r\n    // TODO? clear previous twine elements to allow for loading more than one story\r\n    const storyText = await file.text()\r\n    const storyDoc = parseDoc(storyText)\r\n\r\n    // is document one of DW or DM?\r\n    if (!storyDoc.querySelector('#storeArea > [tiddler = \"CharGenMain\"]')) {\r\n        const confirmContinue = await askToConfirm(file.name)\r\n        if (!confirmContinue) return;\r\n    }\r\n\r\n    hideLanding()\r\n    loadDocIntoDom(storyDoc)\r\n    await injectDigitizerFeatures()\r\n}\r\n\r\nfunction hideLanding() {\r\n    document.querySelector('.digitizer-landing').classList.add('digitizer-landing--inactive')\r\n}\r\n\r\nfunction loadDocIntoDom(doc) {\r\n    document.head.insertAdjacentHTML(\"beforeend\", doc.head.innerHTML)\r\n    document.body.insertAdjacentHTML(\"beforeend\", doc.body.innerHTML)\r\n\r\n    // prevent engine script from running multiple times?\r\n    document.head.querySelectorAll('script').forEach(s => eval(s.text))\r\n    dispatchEvent(new Event('load'))\r\n}\r\n\r\nasync function injectDigitizerFeatures () {\r\n    const store = document.getElementById('storeArea')\r\n    const passages = document.getElementById('passages')\r\n    const tale = window.tale\r\n    const state = window.state\r\n\r\n    // determine whether this is DW or DM by checking which character starts are present\r\n    const DWChars = ['allstarstart', 'youngpunkstart', 'quietonestart', 'runawaystart', 'GwynStart', 'BuddyStart', 'AustinStart', 'DavidStart', 'JackStart', 'MikeStart', 'ThaddeusStart', 'SweetKidStart', 'MeanGirlStart', 'GirlGamerStart', 'SelfSufficientStart', 'CallistaStart', 'BritStart', 'WilmaStart', 'HollyStart', 'CelesteStart', 'HelenStart', 'MareiStart', 'IreneStart']\r\n    const DMChars = ['CaliburnStart', 'DefianceStart', 'EdithStart', 'FionaStart', 'IrethStart', 'KaiStart', 'KiaraStart', 'KonkoStart', 'LeoStart', 'MaxiaStart', 'NicholasStart', 'SimoneStart', 'SiphaStart', 'ValerieStart', 'YamiStart']\r\n    const metadataName = DWChars.some(tale.has, tale) ? 'DW_metadata.json' :\r\n                         DMChars.some(tale.has, tale) ? 'DM_metadata.json' :\r\n                                                    err('Story is neither Worldly nor Mundane')\r\n    // fetch the relevant metadata file from the server\r\n    const metadata = await fetch(DATA_URL + metadataName).then(res => res.json())\r\n\r\n    // build a graph from passages' links\r\n    const passageGraph = buildPassageGraph(store)\r\n\r\n    // render the graph into a tree of story routes by following links starting at CharGenMain and dropping cycles\r\n    const routeTree = Tree.fromGraphBfs(\r\n        (addChild, currentChild) => passageGraph.forEachLinkedNode(\r\n            currentChild,\r\n            (child, link) => addChild(child.id, Object.assign({link: link.data}, child.data)),\r\n            true // only traverse outbound links\r\n        ),\r\n        'CharGenMain'\r\n    )\r\n    // decorate routeTree with tags and other metadata\r\n    routeTree.forEach((value, key) => routeTree.set(key, Object.assign(value, metadata[key])))\r\n\r\n    // dispatch events when switching passages\r\n    window.state.display = function (title, source, type, callback) {\r\n        passages.dispatchEvent(new CustomEvent(\r\n            'before_tale_display',\r\n            {detail: {title, source, type, callback}}))\r\n        Object.getPrototypeOf(window.state).display.apply(this, [title, source, type, callback])\r\n        passages.dispatchEvent(new CustomEvent(\r\n            'after_tale_display',\r\n            {detail: {title, source, type, callback}}))\r\n    }\r\n\r\n    // (Twine conveniently cleans out the previous passage's viewers while removing the previous passage)\r\n    passages.addEventListener(\r\n        'after_tale_display',\r\n        (e) => {\r\n            const curr = e.detail.title\r\n            // if we have metadata for current passage\r\n            if (routeTree.has(curr)) {\r\n                // above passage, add a viewer for current passage's tags and\r\n                passages.prepend(passageTagViewer(gatherTags(curr, routeTree)))\r\n                // if the current passage has preceding passages\r\n                if (routeTree.get(curr).parent)\r\n                    // a retrospective of preceding passages\r\n                    passages.prepend(retrospective(curr, routeTree, tale))\r\n            }\r\n        }\r\n    )\r\n\r\n    // add target passage name to passage links to assist in adding the inline tag viewers\r\n    passages.addEventListener(\r\n        'after_tale_display',\r\n        (e) => annotateLinksWithTheirTarget(e.detail.title, tale, passages.querySelector('.passage.transition-in > .body'))\r\n    )\r\n\r\n    // add inline tag viewer elements to new passages\r\n    passages.addEventListener(\r\n        'after_tale_display',\r\n        (e) => addLinkTagLists(passages.querySelector('.passage.transition-in > .body'), routeTree)\r\n    )\r\n\r\n    // Add sidebar links //\r\n    document.getElementById('sidebar').append(sidebarMenu(tale, state, routeTree, navigator.userAgent))\r\n}\r\n\r\nconst getLinks = body =>\r\n    Array.from(body.matchAll(/\\[\\[(?:([^|]+)\\|)?([^\\]]+)\\]\\]/g)).map(([_, text,  target]) => ({ text, target }))\r\n\r\n// TODO? rewrite using tale instead of storeArea\r\nfunction buildPassageGraph(storeArea) {\r\n    const g = createGraph()\r\n\r\n    const titles = new Set(Array.from(storeArea.children).map((el) => el.getAttribute('tiddler')))\r\n\r\n    for (const passage of storeArea.children) {\r\n        const title = passage.getAttribute('tiddler')\r\n\r\n        for (const { text, target } of getLinks(passage.innerText)) {\r\n            // only include links to passages that exist\r\n            if (titles.has(target)) {\r\n                // create a link between the current and target passages, creating a node for the\r\n                //   target passage if one does not yet exist, and annotating the link with its text\r\n                g.addLink(title, target, { text })\r\n            }\r\n        }\r\n    }\r\n\r\n    return g\r\n}\r\n\r\nfunction annotateLinksWithTheirTarget(title, tale, passageBody) {\r\n    const linkTargets = getLinks(tale.get(title).text).map(({target}) => target)\r\n    const links = Array.from(passageBody.querySelectorAll('a'))\r\n\r\n    for (const [link, target] of take(100, zip([links, linkTargets]))) {\r\n        link.setAttribute('data-target', target)\r\n    }\r\n}\r\n\r\nfunction addLinkTagLists(passageBody, routeTree) {\r\n    passageBody\r\n        .querySelectorAll('a[data-target]')\r\n        .forEach((link) => {\r\n            const title = link.getAttribute('data-target') // NOTE depends on annotateLinksWithTheirTarget\r\n            // if target passage exists\r\n            if (routeTree.has(title)) {\r\n                link.before( inlineTagViewer(\r\n                    gatherTags(title, routeTree, false),\r\n                    gatherTags(title, routeTree, true)\r\n                ))\r\n            }\r\n        })\r\n}\r\n\r\nfunction extractMetadata(routeTree) {\r\n    const include = new Set(['tags', 'modifiedTags'])\r\n    const strip = value => filterObjectByKey(value, key => include.has(key))\r\n\r\n    return routeTree.toObject(([key, value]) => [key, strip(value)])\r\n}\r\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","// import * as petit from 'petit-dom'\r\n// const el = petit.h\r\n// const render = (parent, child, opts) => petit.render(child, parent, opts)\r\n\r\n// import { el, mount } from 'redom'\r\n\r\nimport { el } from 'attodom'\r\nimport { nanoid } from 'nanoid'\r\nimport { pipe, setClass, sleep } from './utilities.js'\r\n\r\nimport flyd from 'flyd'\r\nimport { dropRepeats } from 'flyd/module/droprepeats'\r\nconst { stream } = flyd\r\nconst combine = (streams, fn) => flyd.combine(fn, streams)\r\nconst update = (s, fn) => s(fn(s()))\r\n//const sideEffect = flyd.curryN(2, (fn, s) => flyd.map(x => {fn(x); return x;}, s))\r\n\r\n\r\nconst updateAttribute = (srm, attr, obj) => pipe(\r\n    srm,\r\n    dropRepeats,\r\n    flyd.on(x => obj.getAttribute(attr) === x ? null : obj.setAttribute(attr, x))\r\n)\r\n\r\n\r\n//// Web Components ////\r\n\r\nexport class ClosingDetails extends HTMLDetailsElement {\r\n    constructor() {\r\n        super()\r\n\r\n        this._closeIfUnfocused = (e) => {\r\n            if (!this.contains(document.elementFromPoint(e.clientX, e.clientY))) {\r\n                this.open = false\r\n            }\r\n        }\r\n    }\r\n\r\n    connectedCallback() {\r\n        document.body.addEventListener('mousedown', this._closeIfUnfocused)\r\n    }\r\n\r\n    disconnectedCallback () {\r\n        document.body.removeEventListener('mousedown', this._closeIfUnfocused)\r\n    }\r\n}\r\n\r\n// TODO respond to `disabled` attribute\r\nexport class TabPanel extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, ':host {display: none;} :host(.active) {display: block;}'),\r\n            el('div', {role: 'tabpanel'}, el('slot'))\r\n        )\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.title(this.getAttribute('title') ?? '')\r\n        this.group(this.parentElement instanceof TabGroup ? this.parentElement : null)\r\n        this.id = this.id || nanoid(10)\r\n    }\r\n\r\n    static get observedAttributes() { return ['id', 'title']; }\r\n    attributeChangedCallback(name, oldVal, newVal) {\r\n        if (name === 'id') { this.idChanged(null) }\r\n        else if (name === 'title') { this.title(newVal) }\r\n    }\r\n\r\n    idChanged = stream(null)\r\n    title = stream()\r\n    _onTitleChanged = updateAttribute(this.title, 'title', this)\r\n    group = stream()\r\n    active = combine([this.group.chain(g => g?.active), this.idChanged], (gActive, _) => {\r\n        const active = gActive() === this.id\r\n        setClass(this, 'active', active)\r\n        return active\r\n    })\r\n}\r\n\r\n// TODO respond to `disabled` attribute on TabPanels\r\nexport class TabGroup extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, `\r\n                #tabgroup { display: flex; flex-flow: var(--tabs-position, column) nowrap; gap: var(--tablist-gap, 0); }\r\n                #tablist { display: flex; flex-flow: var(--tabs-flow, row wrap); align-items: var(--tab-align); margin: 0;\r\n                    padding: 0; gap: var(--tabs-gap, .5em); }\r\n                .tab { display: block; background: var(--tab-background); cursor: var(--tab-cursor); padding: var(--tab-padding);\r\n                    border: var(--tab-border); border-style: var(--tab-border-style); border-color: var(--tab-border-color);\r\n                    border-width: var(--tab-border-width); border-radius: var(--tab-border-radius); }\r\n                .tab.active { background: var(--tab-active-background); border: var(--tab-active-border);\r\n                    border-style: var(--tab-active-border-style); border-color: var(--tab-active-border-color);\r\n                    border-width: var(--tab-active-border-width); border-radius: var(--tab-active-border-radius); }`\r\n            ),\r\n            el('div', {part: 'tabgroup', role: 'wrapper', id: 'tabgroup'}, [\r\n                el('slot'),\r\n                el('menu', {part: 'tablist', role: 'tablist', id: 'tablist'})]\r\n            )\r\n        )\r\n        this.shadowRoot\r\n            .querySelector('slot')\r\n            .addEventListener(\r\n                'slotchange',\r\n                e => this.tabs(e.target.assignedElements().filter(x => x instanceof TabPanel))\r\n            )\r\n    }\r\n\r\n    static get observedAttributes() { return ['active']; }\r\n    attributeChangedCallback(name, oldVal, newVal) {\r\n        if (name === 'active') { this.active(newVal) }\r\n    }\r\n\r\n    defaultTabTitle = ''\r\n    tabs = stream()\r\n    active = stream(null)\r\n    _onActiveChanged = updateAttribute(this.active, 'active', this)\r\n\r\n    renderTabList = combine([this.tabs, this.active], (tabs, active) => {\r\n        // if `active` isn't a valid reference to a child tab-panel, default to the first tab-panel\r\n        if (!tabs().some(el => el.id === active())) {\r\n            this.active(tabs()[0]?.id)\r\n            return\r\n        }\r\n        this.shadowRoot.getElementById('tablist').replaceChildren(\r\n            ...tabs().map(tab => el('li', {\r\n                    class: ('tab' + ((active() === tab.id) ? ' active' : '')),\r\n                    onclick: () => this.active(tab.id),\r\n                    'aria-controls': tab.id,\r\n                    role: 'tab',\r\n                },\r\n                tab.title() || this.defaultTabTitle\r\n            ))\r\n        )\r\n    })\r\n}\r\n\r\nexport class TagList extends HTMLUListElement {\r\n    connectedCallback() {\r\n        this.connected(true)\r\n    }\r\n\r\n    connected = stream()\r\n\r\n    tags = stream([])\r\n\r\n    render = combine([this.tags, this.connected], (tags) =>\r\n        // TODO convert to using attodom.list?\r\n        this.replaceChildren(\r\n            ...tags().sort().map(tag => el('li', {class: 'tag_list__tag'}, tag))\r\n        )\r\n    )\r\n}\r\n\r\nexport class ModalOverlay extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, `\r\n                #overlay {\r\n                    display: var(--overlay-display, flex); flex-flow: column nowrap; justify-content: safe center;\r\n                    align-items: center;\r\n\r\n                    position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%;\r\n                    overflow: auto;\r\n\r\n                    background-color: var(--overlay-color, rgba(0,0,0,0.4));\r\n                }`\r\n            ),\r\n            el('div', {id: 'overlay'}, [el('slot')]),\r\n        )\r\n        this.addEventListener('request_overlay_close', e => {e.stopPropagation(); this.close()})\r\n    }\r\n    \r\n    static closeRequest = new Event('request_overlay_close', {bubbles:true, cancelable:true})\r\n\r\n    open(parent) {\r\n        parent.appendChild(this._overlay)\r\n    }\r\n    \r\n    close() { this.remove() }\r\n}\r\n\r\nexport class DialogPrompt extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, `\r\n                #dialog {\r\n                    background-color: var(--dialog-color, grey); padding: var(--dialog-padding, 2em);\r\n                    border: var(--dialog-border); border-radius: var(--dialog-border-radius);\r\n                }\r\n\r\n                #buttons {\r\n                    display: flex; flex-flow: row wrap; justify-content: space-around;\r\n                    align-items: center; align-content: space-around; border: none;\r\n                }`\r\n            ),\r\n            el('form', {id: 'dialog', onsubmit: _ => false}, [\r\n                el('slot', {name: 'prompt'}),\r\n                el('fieldset', {id: 'buttons'}, [el('slot', {name: 'buttons'})])\r\n            ]),\r\n        )\r\n    }\r\n}\r\n\r\nexport class Toast extends HTMLElement {\r\n    constructor() {\r\n        super()\r\n        this.attachShadow({mode: 'open'})\r\n        this.shadowRoot.append(\r\n            el('style', null, `\r\n                @keyframes fadeOut {\r\n                    from {opacity: 1;}\r\n                    to {opacity: 0;}\r\n                }\r\n                \r\n                #toast {\r\n                    background-color: var(--toast-color, grey); padding: var(--toast-padding, 2em);\r\n                    border: var(--toast-border); border-radius: var(--toast-border-radius);\r\n                    position: fixed; z-index: 1; left: 50%; bottom: 25%; transform: -50%;\r\n                }\r\n                \r\n                #toast.fade {\r\n                    animation: fadeOut 1s ease-in;\r\n                }` // TODO make fade out time customizable\r\n            ),\r\n            el('p', {id:'toast'}),\r\n        )\r\n        \r\n        this.shadowRoot.getElementById('toast').addEventListener(\r\n            'animationend',\r\n            e => {if (e.animationName === 'fadeOut') this.remove()}\r\n        )\r\n    }\r\n    \r\n    connectedCallback() {\r\n        const toast = this.shadowRoot.getElementById('toast')\r\n        toast.textContent = this.getAttribute('text')\r\n        sleep(Number(this.getAttribute('linger-time')) * 1000)\r\n            .then(_ => toast.classList.add('fade'))\r\n    }\r\n}\r\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","// @ts-check\n/* eslint-disable global-require */\nexport { default as el } from './el.js'\nexport { default as svg } from './svg.js'\nexport { default as list } from './list.js'\nexport { default as find } from './find.js'\nexport { default as css } from './css.js'\n","import EVENTS from './src/events.js'\n\nvar htmlProps = {\n\tid: true,\n\tnodeValue: true,\n\ttextContent: true,\n\tclassName: true,\n\tinnerHTML: true,\n\ttabIndex: true,\n\tvalue: true\n}\n\n/**\n * @param {string|HTMLElement} tagName\n * @return {HTMLElement}\n */\nexport default function(tagName) {\n\t//@ts-ignore\n\tvar node = tagName.nodeType === 1 ? tagName : document.createElement(tagName)\n\n\tfor (var i=1; i<arguments.length; ++i) {\n\t\tvar arg = arguments[i]\n\t\tif (arg != null) {\n\t\t\t//TODO skip .constructor\n\t\t\tif (!arg.constructor || arg.constructor === Object) for (var j=0, ks=Object.keys(arg); j<ks.length; ++j) {\n\t\t\t\tvar key = ks[j],\n\t\t\t\t\t\tval = arg[key]\n\t\t\t\tif (key === 'style') node.style.cssText = val\n\t\t\t\telse if (typeof val !== 'string' || htmlProps[key]) {\n\t\t\t\t\tnode[key] = val\n\t\t\t\t\t//set synthetic events for onUpperCaseName\n\t\t\t\t\tif (key[0] === 'o' && key[1] === 'n' && key.charCodeAt(2) < 91 && key.charCodeAt(2) > 64 && !EVENTS[key]) {\n\t\t\t\t\t\tdocument.addEventListener(key.slice(2).toLowerCase(), function(e) {\n\t\t\t\t\t\t\tvar tgt = e.target\n\t\t\t\t\t\t\tdo if (tgt[key]) return tgt[key](e)\n\t\t\t\t\t\t\twhile((tgt = tgt.parentNode))\n\t\t\t\t\t\t})\n\t\t\t\t\t\tEVENTS[key] = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse node.setAttribute(key, val)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (Array.isArray(arg)) for (var k=0; k<arg.length; ++k) node.appendChild(\n\t\t\t\t\targ[k].nodeType ? arg[k] : document.createTextNode(arg[k])\n\t\t\t\t)\n\t\t\t\telse node.appendChild(arg.nodeType ? arg : document.createTextNode(arg))\n\t\t\t}\n\t\t}\n\t}\n\treturn node\n}\n","export default {}\n","import EVENTS from './src/events.js'\n\n/**\n * @param {string} tagName\n * @return {Element}\n */\nexport default function(tagName) {\n\t//@ts-ignore\n\tvar node = tagName.nodeType === 1 ? tagName : document.createElementNS('http://www.w3.org/2000/svg', tagName)\n\n\tfor (var i=1; i<arguments.length; ++i) {\n\t\tvar arg = arguments[i]\n\t\tif (arg != null) {\n\t\t\t//TODO skip .constructor\n\t\t\tif (!arg.constructor || arg.constructor === Object) for (var j=0, ks=Object.keys(arg); j<ks.length; ++j) {\n\t\t\t\tvar key = ks[j],\n\t\t\t\t\t\tval = arg[key]\n\t\t\t\tif (typeof val !== 'string') {\n\t\t\t\t\tnode[key] = val\n\t\t\t\t\t//set synthetic events for onUpperCaseName\n\t\t\t\t\tif (key[0] === 'o' && key[1] === 'n' && key.charCodeAt(2) < 91 && key.charCodeAt(2) > 64 && !EVENTS[key]) {\n\t\t\t\t\t\tdocument.addEventListener(key.slice(2).toLowerCase(), function(e) { //eslint-disable-line\n\t\t\t\t\t\t\tvar tgt = e.target\n\t\t\t\t\t\t\tdo if (tgt[key]) return tgt[key](e)\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\twhile((tgt = tgt.parentNode))\n\t\t\t\t\t\t})\n\t\t\t\t\t\tEVENTS[key] = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse node.setAttribute(key, val)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (Array.isArray(arg)) for (var k=0; k<arg.length; ++k) node.appendChild(\n\t\t\t\t\targ[k].nodeType ? arg[k] : document.createTextNode(arg[k])\n\t\t\t\t)\n\t\t\t\telse node.appendChild(arg.nodeType ? arg : document.createTextNode(arg))\n\t\t\t}\n\t\t}\n\t}\n\treturn node\n}\n","import { saveAs } from 'file-saver'\r\n//import { readKey, encrypt, createMessage } from 'openpgp'\r\n\r\nexport const equal = (x, y) => x === y\r\n\r\nexport const setClass = (elem, cl, bool) => bool ? elem.classList.add(cl) : elem.classList.remove(cl)\r\n\r\nexport const err = (...args) => {throw new Error(...args)}\r\n\r\nexport const sleep = ms => new Promise(res => setTimeout(res, ms))\r\n\r\nexport const pipe = (x, ...fns) => fns.reduce((acc, fn) => fn(acc), x)\r\n\r\nexport const flow = (...fns) => x => fns.reduce((acc, fn) => fn(acc), x)\r\n\r\nexport const zip = rows => rows[0].map( (_,c) => rows.map( row => row[c] ))\r\n\r\nexport function* take(n, iter) {\r\n    for (const x of iter) {\r\n        if (n < 1) break;\r\n        yield x;\r\n        n -= 1;\r\n    }\r\n}\r\n\r\nexport function setUnion(...sets) {\r\n    const union = new Set(sets.shift())\r\n    for (const currSet of sets) {\r\n        for (const elem of currSet) {\r\n            union.add(elem)\r\n        }\r\n    }\r\n    return union\r\n}\r\n\r\nexport const arrayUnique = (arr) => Array.from(new Set(arr))\r\n\r\nexport function filterObjectByEntry(obj, pred) {\r\n    return Object.fromEntries(Object.entries(obj).filter(pred))\r\n}\r\n\r\nexport function filterObjectByKey(obj, pred) {\r\n    return filterObjectByEntry(obj, ([key, _]) => pred(key))\r\n}\r\n\r\nexport const substituteText =\r\n    (template, context) => template.replaceAll(/{(\\w+)}/g, (match, key) => context[key] ?? match)\r\n\r\nexport class Tree extends Map {\r\n    constructor(root, attributes = {}) {\r\n        super()\r\n\r\n        if (root) {this.setRoot(root, attributes)}\r\n    }\r\n\r\n    root = null\r\n\r\n    setRoot(node, attributes = {}) {\r\n        if (this.root !== null) throw new Error(`root '${this.root}' already exists`)\r\n        this.set(node, Object.assign(attributes, {children: [], parent: null}))\r\n        this.root = node\r\n    }\r\n\r\n    addChild(parent, child, attributes = {}) {\r\n        if (this.get(child) !== undefined) {throw new Error(`child ${child} already exists`)}\r\n        this.get(parent)?.children?.push(child) ?? err(`parent '${parent}' does not exist or is malformed`)\r\n        this.set(child, Object.assign(attributes, {children: [], parent: parent}))\r\n    }\r\n\r\n    deleteNode(node) {\r\n        for (const child of this.get(node).children) {\r\n            this.deleteNode(child)\r\n        }\r\n        this.delete(node)\r\n    }\r\n\r\n    toObject(morphism) {\r\n        if (typeof(morphism) === 'function') {\r\n            return Object.fromEntries(Array.from(this, morphism))\r\n        } else {\r\n            return Object.fromEntries(this)\r\n        }\r\n    }\r\n\r\n    getAncestryOf(node) {\r\n        const ancestry = []\r\n        let parent = this.get(node).parent\r\n        while (parent !== null) {\r\n            ancestry.unshift(parent)\r\n            parent = this.get(parent).parent\r\n        }\r\n        return ancestry\r\n    }\r\n\r\n    // I don't trust this algorithm. Does it have bugs? Is it efficient? Does it cover all edge\r\n    //   cases? No clue. But it's not recursive.\r\n    // Collapses `tree` into a single value using an accumulator function `f` (similar to `reduce`)\r\n    //   optionally starting at subtree `node`. `f` is passed each node except the node's\r\n    //   `children` attribute instead holds the results of applying `f` to the node's children.\r\n    static cata(tree, node = null, f) {\r\n        const newLayer = node => ({node, before: [...tree.get(node).children], after: []})\r\n        const stack = [newLayer(node ?? tree.root)]\r\n\r\n        while (true) {\r\n            if (stack.at(-1).before.length) {\r\n                stack.push(newLayer(stack.at(-1).before.pop()))\r\n            } else {\r\n                const curr = stack.pop()\r\n                const res = f({...tree.get(curr.node), children: curr.after})\r\n                if (!stack.length) return res\r\n                stack.at(-1).after.push(res)\r\n            }\r\n        }\r\n    }\r\n\r\n    static fromGraphBfs(getChildren, root) {\r\n        const tree = new Tree(root)\r\n        const frontier = [root]\r\n\r\n        const addChildOf = (currentNode) => (id, data = {}) => {\r\n            if (!tree.has(id)) {\r\n                frontier.push(id)\r\n                tree.addChild(currentNode, id, data)\r\n            }\r\n        }\r\n\r\n        while (frontier.length > 0) {\r\n            const currentNode = frontier.pop()\r\n            getChildren(addChildOf(currentNode), currentNode)\r\n        }\r\n        return tree\r\n    }\r\n}\r\n\r\n/// HTML ///\r\n\r\nexport const cloneTemplateFrom = (doc) => (templateId) => {\r\n    // NOTE importNode works like cloneNode except it upgrades custom elements. Needed because\r\n    //   it works on template contents, unlike customElements.upgrade.\r\n    const template = doc.importNode(doc.getElementById(templateId).content, true)\r\n    // clear the fragment of extraneous nodes that might break things\r\n    // TODO Apply recursively to comments\r\n    Array.from(template.childNodes).forEach(el => {\r\n        if ((el.nodeName === '#text' && !el.nodeValue.trim()) || el.nodeName === '#comment') {el.remove()}\r\n    })\r\n    return template\r\n}\r\n\r\nexport function parseDoc(docText) {\r\n    return new DOMParser().parseFromString(docText, \"text/html\")\r\n}\r\n\r\nexport function exportObject(obj, filename) {\r\n    saveAs(new Blob([JSON.stringify(obj)], {type: 'application/json'}), filename)\r\n}\r\n\r\nexport async function encryptMessage(armoredPublicKey, text) {\r\n    const { readKey, encrypt, createMessage } = await import('openpgp')\r\n    return await encrypt({\r\n        message: await createMessage({text}),\r\n        encryptionKeys: await readKey({armoredKey: armoredPublicKey})\r\n    })\r\n}","import defineProperty from './_define_property.mjs';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\n\nexport default function _objectSpreadProps(target, source) {\n  source = source != null ? source : {}\n  if (Object.getOwnPropertyDescriptors) {\n    Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n  } else {\n    ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(\n        target,\n        key,\n        Object.getOwnPropertyDescriptor(source, key)\n      );\n    });\n  }\n\n  return target;\n}","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","module.exports = (require(\"./helpers/browser/import-polyfill\")(require('./helpers/bundle-url').getBundleURL('gOfOb') + require('./helpers/bundle-manifest').resolve(\"gwDts\"))).then(() => parcelRequire('26wHK'));","\"use strict\";\n\nvar cacheLoader = require('../cacheLoader');\n\nmodule.exports = cacheLoader(function (bundle) {\n  return new Promise(function (resolve, reject) {\n    // Add a global function to handle when the script loads.\n    var globalName = \"i\".concat(('' + Math.random()).slice(2));\n\n    global[globalName] = function (m) {\n      resolve(m);\n      cleanup();\n    }; // Remove script on load or error\n\n\n    var cleanup = function () {\n      delete global[globalName];\n      script.onerror = null;\n      script.remove();\n    }; // Append an inline script tag into the document head\n\n\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'module';\n    script.charset = 'utf-8';\n    script.textContent = \"import * as m from '\".concat(bundle, \"'; \").concat(globalName, \"(m);\");\n\n    script.onerror = function (e) {\n      reject(e);\n      cleanup();\n    };\n\n    document.head.appendChild(script);\n  });\n});","\"use strict\";\n\nvar cachedBundles = {};\nvar cachedPreloads = {};\nvar cachedPrefetches = {};\n\nfunction getCache(type) {\n  switch (type) {\n    case 'preload':\n      return cachedPreloads;\n\n    case 'prefetch':\n      return cachedPrefetches;\n\n    default:\n      return cachedBundles;\n  }\n}\n\nmodule.exports = function (loader, type) {\n  return function (bundle) {\n    var cache = getCache(type);\n\n    if (cache[bundle]) {\n      return cache[bundle];\n    }\n\n    return cache[bundle] = loader.apply(null, arguments).catch(function (e) {\n      delete cache[bundle];\n      throw e;\n    });\n  };\n};","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","'use strict';\n\nvar curryN = require('ramda/src/curryN');\n\n// Utility\nfunction isFunction(obj) {\n  return !!(obj && obj.constructor && obj.call && obj.apply);\n}\nfunction trueFn() { return true; }\n\n// Globals\nvar toUpdate = [];\nvar inStream;\nvar order = [];\nvar orderNextIdx = -1;\nvar flushingUpdateQueue = false;\nvar flushingStreamValue = false;\n\nfunction flushing() {\n  return flushingUpdateQueue || flushingStreamValue;\n}\n\n\n/** @namespace */\nvar flyd = {}\n\n// /////////////////////////// API ///////////////////////////////// //\n\n/**\n * Creates a new stream\n *\n * __Signature__: `a -> Stream a`\n *\n * @name flyd.stream\n * @param {*} initialValue - (Optional) the initial value of the stream\n * @return {stream} the stream\n *\n * @example\n * var n = flyd.stream(1); // Stream with initial value `1`\n * var s = flyd.stream(); // Stream with no initial value\n */\nflyd.stream = function(initialValue) {\n  var endStream = createDependentStream([], trueFn);\n  var s = createStream();\n  s.end = endStream;\n  s.fnArgs = [];\n  endStream.listeners.push(s);\n  if (arguments.length > 0) s(initialValue);\n  return s;\n}\n// fantasy-land Applicative\nflyd.stream['fantasy-land/of'] = flyd.stream.of = flyd.stream;\n\n\n/**\n * Create a new dependent stream\n *\n * __Signature__: `(...Stream * -> Stream b -> b) -> [Stream *] -> Stream b`\n *\n * @name flyd.combine\n * @param {Function} fn - the function used to combine the streams\n * @param {Array<stream>} dependencies - the streams that this one depends on\n * @return {stream} the dependent stream\n *\n * @example\n * var n1 = flyd.stream(0);\n * var n2 = flyd.stream(0);\n * var max = flyd.combine(function(n1, n2, self, changed) {\n *   return n1() > n2() ? n1() : n2();\n * }, [n1, n2]);\n */\nflyd.combine = curryN(2, combine);\nfunction combine(fn, streams) {\n  var i, s, deps, depEndStreams;\n  var endStream = createDependentStream([], trueFn);\n  deps = []; depEndStreams = [];\n  for (i = 0; i < streams.length; ++i) {\n    if (streams[i] !== undefined) {\n      deps.push(streams[i]);\n      if (streams[i].end !== undefined) depEndStreams.push(streams[i].end);\n    }\n  }\n  s = createDependentStream(deps, fn);\n  s.depsChanged = [];\n  s.fnArgs = s.deps.concat([s, s.depsChanged]);\n  s.end = endStream;\n  endStream.listeners.push(s);\n  addListeners(depEndStreams, endStream);\n  endStream.deps = depEndStreams;\n  updateStream(s);\n  return s;\n}\n\n/**\n * Returns `true` if the supplied argument is a Flyd stream and `false` otherwise.\n *\n * __Signature__: `* -> Boolean`\n *\n * @name flyd.isStream\n * @param {*} value - the value to test\n * @return {Boolean} `true` if is a Flyd streamn, `false` otherwise\n *\n * @example\n * var s = flyd.stream(1);\n * var n = 1;\n * flyd.isStream(s); //=> true\n * flyd.isStream(n); //=> false\n */\nflyd.isStream = function(stream) {\n  return isFunction(stream) && 'hasVal' in stream;\n}\n\n/**\n * Invokes the body (the function to calculate the value) of a dependent stream\n *\n * By default the body of a dependent stream is only called when all the streams\n * upon which it depends has a value. `immediate` can circumvent this behaviour.\n * It immediately invokes the body of a dependent stream.\n *\n * __Signature__: `Stream a -> Stream a`\n *\n * @name flyd.immediate\n * @param {stream} stream - the dependent stream\n * @return {stream} the same stream\n *\n * @example\n * var s = flyd.stream();\n * var hasItems = flyd.immediate(flyd.combine(function(s) {\n *   return s() !== undefined && s().length > 0;\n * }, [s]);\n * console.log(hasItems()); // logs `false`. Had `immediate` not been\n *                          // used `hasItems()` would've returned `undefined`\n * s([1]);\n * console.log(hasItems()); // logs `true`.\n * s([]);\n * console.log(hasItems()); // logs `false`.\n */\nflyd.immediate = function(s) {\n  if (s.depsMet === false) {\n    s.depsMet = true;\n    updateStream(s);\n  }\n  return s;\n}\n\n/**\n * Changes which `endsStream` should trigger the ending of `s`.\n *\n * __Signature__: `Stream a -> Stream b -> Stream b`\n *\n * @name flyd.endsOn\n * @param {stream} endStream - the stream to trigger the ending\n * @param {stream} stream - the stream to be ended by the endStream\n * @param {stream} the stream modified to be ended by endStream\n *\n * @example\n * var n = flyd.stream(1);\n * var killer = flyd.stream();\n * // `double` ends when `n` ends or when `killer` emits any value\n * var double = flyd.endsOn(flyd.merge(n.end, killer), flyd.combine(function(n) {\n *   return 2 * n();\n * }, [n]);\n*/\nflyd.endsOn = function(endS, s) {\n  detachDeps(s.end);\n  endS.listeners.push(s.end);\n  s.end.deps.push(endS);\n  return s;\n}\n\n/**\n * Map a stream\n *\n * Returns a new stream consisting of every value from `s` passed through\n * `fn`. I.e. `map` creates a new stream that listens to `s` and\n * applies `fn` to every new value.\n * __Signature__: `(a -> result) -> Stream a -> Stream result`\n *\n * @name flyd.map\n * @param {Function} fn - the function that produces the elements of the new stream\n * @param {stream} stream - the stream to map\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = flyd.map(function(n) { return n*n; }, numbers);\n */\n// Library functions use self callback to accept (null, undefined) update triggers.\nfunction map(f, s) {\n  return combine(function(s, self) { self(f(s.val)); }, [s]);\n}\nflyd.map = curryN(2, map)\n\n/**\n * Chain a stream\n *\n * also known as flatMap\n *\n * Where `fn` returns a stream this function will flatten the resulting streams.\n * Every time `fn` is called the context of the returned stream will \"switch\" to that stream.\n *\n * __Signature__: `(a -> Stream b) -> Stream a -> Stream b`\n *\n * @name flyd.chain\n * @param {Function} fn - the function that produces the streams to be flattened\n * @param {stream} stream - the stream to map\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var filter = flyd.stream('who');\n * var items = flyd.chain(function(filter){\n *   return flyd.stream(findUsers(filter));\n * }, filter);\n */\nflyd.chain = curryN(2, chain);\n\n/**\n * Apply a stream\n *\n * Applies the value in `s2` to the function in `s1`.\n *\n * __Signature__: `Stream (a -> b) -> Stream a -> Stream b`\n *\n * @name flyd.ap\n * @param {stream} s1 - The value to be applied\n * @param {stream} s2 - The function expecting the value\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var add = stream(a => b => a + b)\n * var n1 = stream(1)\n * var n2 = stream(2)\n *\n * var added = flyd.ap(n2, flyd.ap(n1, add)) // stream(3)\n * // can also be written using pipe\n * var added_pipe = add\n *   .pipe(ap(n1))\n *   .pipe(ap(n2));\n * added_pipe() // 3\n */\nflyd.ap = curryN(2, ap);\n\n/**\n * Listen to stream events\n *\n * Similar to `map` except that the returned stream is empty. Use `on` for doing\n * side effects in reaction to stream changes. Use the returned stream only if you\n * need to manually end it.\n *\n * __Signature__: `(a -> result) -> Stream a -> Stream undefined`\n *\n * @name flyd.on\n * @param {Function} cb - the callback\n * @param {stream} stream - the stream\n * @return {stream} an empty stream (can be ended)\n */\nflyd.on = curryN(2, function(f, s) {\n  return combine(function(s) { f(s.val); }, [s]);\n})\n\n/**\n * Creates a new stream with the results of calling the function on every incoming\n * stream with and accumulator and the incoming value.\n *\n * __Signature__: `(a -> b -> a) -> a -> Stream b -> Stream a`\n *\n * @name flyd.scan\n * @param {Function} fn - the function to call\n * @param {*} val - the initial value of the accumulator\n * @param {stream} stream - the stream source\n * @return {stream} the new stream\n *\n * @example\n * var numbers = flyd.stream();\n * var sum = flyd.scan(function(sum, n) { return sum+n; }, 0, numbers);\n * numbers(2)(3)(5);\n * sum(); // 10\n */\nflyd.scan = curryN(3, function(f, acc, s) {\n  var ns = combine(function(s, self) {\n    self(acc = f(acc, s.val));\n  }, [s]);\n  if (!ns.hasVal) ns(acc);\n  return ns;\n});\n\n/**\n * Creates a new stream down which all values from both `stream1` and `stream2`\n * will be sent.\n *\n * __Signature__: `Stream a -> Stream a -> Stream a`\n *\n * @name flyd.merge\n * @param {stream} source1 - one stream to be merged\n * @param {stream} source2 - the other stream to be merged\n * @return {stream} a stream with the values from both sources\n *\n * @example\n * var btn1Clicks = flyd.stream();\n * button1Elm.addEventListener(btn1Clicks);\n * var btn2Clicks = flyd.stream();\n * button2Elm.addEventListener(btn2Clicks);\n * var allClicks = flyd.merge(btn1Clicks, btn2Clicks);\n */\nflyd.merge = curryN(2, function(s1, s2) {\n  var s = flyd.immediate(combine(function(s1, s2, self, changed) {\n    if (changed[0]) {\n      self(changed[0]());\n    } else if (s1.hasVal) {\n      self(s1.val);\n    } else if (s2.hasVal) {\n      self(s2.val);\n    }\n  }, [s1, s2]));\n  flyd.endsOn(combine(function() {\n    return true;\n  }, [s1.end, s2.end]), s);\n  return s;\n});\n\n/**\n * Creates a new stream resulting from applying `transducer` to `stream`.\n *\n * __Signature__: `Transducer -> Stream a -> Stream b`\n *\n * @name flyd.transduce\n * @param {Transducer} xform - the transducer transformation\n * @param {stream} source - the stream source\n * @return {stream} the new stream\n *\n * @example\n * var t = require('transducers.js');\n *\n * var results = [];\n * var s1 = flyd.stream();\n * var tx = t.compose(t.map(function(x) { return x * 2; }), t.dedupe());\n * var s2 = flyd.transduce(tx, s1);\n * flyd.combine(function(s2) { results.push(s2()); }, [s2]);\n * s1(1)(1)(2)(3)(3)(3)(4);\n * results; // => [2, 4, 6, 8]\n */\nflyd.transduce = curryN(2, function(xform, source) {\n  xform = xform(new StreamTransformer());\n  return combine(function(source, self) {\n    var res = xform['@@transducer/step'](undefined, source.val);\n    if (res && res['@@transducer/reduced'] === true) {\n      self.end(true);\n      return res['@@transducer/value'];\n    } else {\n      return res;\n    }\n  }, [source]);\n});\n\n/**\n * Returns `fn` curried to `n`. Use this function to curry functions exposed by\n * modules for Flyd.\n *\n * @name flyd.curryN\n * @function\n * @param {Integer} arity - the function arity\n * @param {Function} fn - the function to curry\n * @return {Function} the curried function\n *\n * @example\n * function add(x, y) { return x + y; };\n * var a = flyd.curryN(2, add);\n * a(2)(4) // => 6\n */\nflyd.curryN = curryN\n\n/**\n * Returns a new stream identical to the original except every\n * value will be passed through `f`.\n *\n * _Note:_ This function is included in order to support the fantasy land\n * specification.\n *\n * __Signature__: Called bound to `Stream a`: `(a -> b) -> Stream b`\n *\n * @name stream.map\n * @param {Function} function - the function to apply\n * @return {stream} a new stream with the values mapped\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = numbers.map(function(n) { return n*n; });\n */\nfunction boundMap(f) { return map(f, this); }\n\n/**\n * Returns the result of applying function `fn` to this stream\n *\n * __Signature__: Called bound to `Stream a`: `(a -> Stream b) -> Stream b`\n *\n * @name stream.pipe\n * @param {Function} fn - the function to apply\n * @return {stream} A new stream\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = numbers.pipe(flyd.map(function(n){ return n*n; }));\n */\nfunction operator_pipe(f) { return f(this) }\n\nfunction boundChain(f) {\n  return chain(f, this);\n}\n\nfunction chain(f, s) {\n  // Internal state to end flat map stream\n  var flatEnd = flyd.stream(1);\n  var internalEnded = flyd.on(function() {\n    var alive = flatEnd() - 1;\n    flatEnd(alive);\n    if (alive <= 0) {\n      flatEnd.end(true);\n    }\n  });\n\n  internalEnded(s.end);\n  var last = flyd.stream();\n  var flatStream = flyd.combine(function(s, own) {\n    last.end(true)\n    // Our fn stream makes streams\n    var newS = f(s());\n    flatEnd(flatEnd() + 1);\n    internalEnded(newS.end);\n\n    // Update self on call -- newS is never handed out so deps don't matter\n    last = map(own, newS);\n  }, [s]);\n\n  flyd.endsOn(flatEnd.end, flatStream);\n\n  return flatStream;\n}\n\nflyd.fromPromise = function fromPromise(p) {\n  var s = flyd.stream();\n  p.then(function(val) {\n    s(val);\n    s.end(true);\n  });\n  return s;\n}\n\nflyd.flattenPromise = function flattenPromise(s) {\n  return combine(function(s, self) {\n    s().then(self);\n  }, [s])\n}\n\n\n/**\n * Returns a new stream which is the result of applying the\n * functions from `this` stream to the values in `stream` parameter.\n *\n * `this` stream must be a stream of functions.\n *\n * _Note:_ This function is included in order to support the fantasy land\n * specification.\n *\n * __Signature__: Called bound to `Stream (a -> b)`: `a -> Stream b`\n *\n * @name stream.ap\n * @param {stream} stream - the values stream\n * @return {stream} a new stream with the functions applied to values\n *\n * @example\n * var add = flyd.curryN(2, function(x, y) { return x + y; });\n * var numbers1 = flyd.stream();\n * var numbers2 = flyd.stream();\n * var addToNumbers1 = flyd.map(add, numbers1);\n * var added = addToNumbers1.ap(numbers2);\n */\nfunction ap(s2, s1) {\n  return combine(function(s1, s2, self) { self(s1.val(s2.val)); }, [s1, s2]);\n}\n\nfunction boundAp(s2) {\n  return ap(s2, this);\n}\n\n/**\n * @private\n */\nfunction fantasy_land_ap(s1) {\n  return ap(this, s1);\n}\n\n/**\n * Get a human readable view of a stream\n * @name stream.toString\n * @return {String} the stream string representation\n */\nfunction streamToString() {\n  return 'stream(' + this.val + ')';\n}\n\n/**\n * @name stream.end\n * @memberof stream\n * A stream that emits `true` when the stream ends. If `true` is pushed down the\n * stream the parent stream ends.\n */\n\n/**\n * @name stream.of\n * @function\n * @memberof stream\n * Returns a new stream with `value` as its initial value. It is identical to\n * calling `flyd.stream` with one argument.\n *\n * __Signature__: Called bound to `Stream (a)`: `b -> Stream b`\n *\n * @param {*} value - the initial value\n * @return {stream} the new stream\n *\n * @example\n * var n = flyd.stream(1);\n * var m = n.of(1);\n */\n\n// /////////////////////////// PRIVATE ///////////////////////////////// //\n/**\n * @private\n * Create a stream with no dependencies and no value\n * @return {Function} a flyd stream\n */\nfunction createStream() {\n  function s(n) {\n    if (arguments.length === 0) return s.val\n    updateStreamValue(n, s)\n    return s\n  }\n  s.hasVal = false;\n  s.val = undefined;\n  s.updaters = [];\n  s.listeners = [];\n  s.queued = false;\n  s.end = undefined;\n\n  // fantasy-land compatibility\n  s.ap = boundAp;\n  s['fantasy-land/map'] = s.map = boundMap;\n  s['fantasy-land/ap'] = fantasy_land_ap;\n  s['fantasy-land/of'] = s.of = flyd.stream;\n  s['fantasy-land/chain'] = s.chain = boundChain;\n\n  s.pipe = operator_pipe;\n\n  // According to the fantasy-land Applicative specification\n  // Given a value f, one can access its type representative via the constructor property:\n  // `f.constructor.of`\n  s.constructor = flyd.stream;\n\n  s.toJSON = function() {\n    return s.val;\n  }\n  s.toString = streamToString;\n  return s;\n}\n\n/**\n * @private\n * Create a dependent stream\n * @param {Array<stream>} dependencies - an array of the streams\n * @param {Function} fn - the function used to calculate the new stream value\n * from the dependencies\n * @return {stream} the created stream\n */\nfunction createDependentStream(deps, fn) {\n  var s = createStream();\n  s.fn = fn;\n  s.deps = deps;\n  s.depsMet = false;\n  s.depsChanged = deps.length > 0 ? [] : undefined;\n  s.shouldUpdate = false;\n  addListeners(deps, s);\n  return s;\n}\n\n/**\n * @private\n * Check if all the dependencies have values\n * @param {stream} stream - the stream to check depencencies from\n * @return {Boolean} `true` if all dependencies have vales, `false` otherwise\n */\nfunction initialDependenciesMet(stream) {\n  stream.depsMet = stream.deps.every(function(s) {\n    return s.hasVal;\n  });\n  return stream.depsMet;\n}\n\nfunction dependenciesAreMet(stream) {\n  return stream.depsMet === true || initialDependenciesMet(stream);\n}\n\nfunction isEnded(stream) {\n  return stream.end && stream.end.val === true;\n}\n\nfunction listenersNeedUpdating(s) {\n  return s.listeners.some(function(s) { return s.shouldUpdate; });\n}\n\n/**\n * @private\n * Update a dependent stream using its dependencies in an atomic way\n * @param {stream} stream - the stream to update\n */\nfunction updateStream(s) {\n  if (isEnded(s) || !dependenciesAreMet(s)) return;\n  if (inStream !== undefined) {\n    updateLaterUsing(updateStream, s);\n    return;\n  }\n  inStream = s;\n  if (s.depsChanged) s.fnArgs[s.fnArgs.length - 1] = s.depsChanged;\n  var returnVal = s.fn.apply(s.fn, s.fnArgs);\n  if (returnVal !== undefined) {\n    s(returnVal);\n  }\n  inStream = undefined;\n  if (s.depsChanged !== undefined) s.depsChanged = [];\n  s.shouldUpdate = false;\n  if (flushing() === false) flushUpdate();\n  if (listenersNeedUpdating(s)) {\n    if (!flushingStreamValue) s(s.val)\n    else {\n      s.listeners.forEach(function(listener) {\n        if (listener.shouldUpdate) updateLaterUsing(updateStream, listener);\n      });\n    }\n  }\n}\n\n/**\n * @private\n * Update the dependencies of a stream\n * @param {stream} stream\n */\nfunction updateListeners(s) {\n  var i, o, list\n  var listeners = s.listeners;\n  for (i = 0; i < listeners.length; ++i) {\n    list = listeners[i];\n    if (list.end === s) {\n      endStream(list);\n    } else {\n      if (list.depsChanged !== undefined) list.depsChanged.push(s);\n      list.shouldUpdate = true;\n      findDeps(list);\n    }\n  }\n  for (; orderNextIdx >= 0; --orderNextIdx) {\n    o = order[orderNextIdx];\n    if (o.shouldUpdate === true) updateStream(o);\n    o.queued = false;\n  }\n}\n\n/**\n * @private\n * Add stream dependencies to the global `order` queue.\n * @param {stream} stream\n * @see updateDeps\n */\nfunction findDeps(s) {\n  var i\n  var listeners = s.listeners;\n  if (s.queued === false) {\n    s.queued = true;\n    for (i = 0; i < listeners.length; ++i) {\n      findDeps(listeners[i]);\n    }\n    order[++orderNextIdx] = s;\n  }\n}\n\nfunction updateLaterUsing(updater, stream) {\n  toUpdate.push(stream);\n  stream.updaters.push(updater);\n  stream.shouldUpdate = true;\n}\n\n/**\n * @private\n */\nfunction flushUpdate() {\n  flushingUpdateQueue = true;\n  while (toUpdate.length > 0) {\n    var stream = toUpdate.shift();\n    var nextUpdateFn = stream.updaters.shift();\n    if (nextUpdateFn && stream.shouldUpdate) nextUpdateFn(stream);\n  }\n  flushingUpdateQueue = false;\n}\n\n/**\n * @private\n * Push down a value into a stream\n * @param {stream} stream\n * @param {*} value\n */\nfunction updateStreamValue(n, s) {\n  s.val = n;\n  s.hasVal = true;\n  if (inStream === undefined) {\n    flushingStreamValue = true;\n    updateListeners(s);\n    if (toUpdate.length > 0) flushUpdate();\n    flushingStreamValue = false;\n  } else if (inStream === s) {\n    markListeners(s, s.listeners);\n  } else {\n    updateLaterUsing(function(s) { updateStreamValue(n, s); }, s);\n  }\n}\n\n/**\n * @private\n */\nfunction markListeners(s, lists) {\n  var i, list;\n  for (i = 0; i < lists.length; ++i) {\n    list = lists[i];\n    if (list.end !== s) {\n      if (list.depsChanged !== undefined) {\n        list.depsChanged.push(s);\n      }\n      list.shouldUpdate = true;\n    } else {\n      endStream(list);\n    }\n  }\n}\n\n/**\n * @private\n * Add dependencies to a stream\n * @param {Array<stream>} dependencies\n * @param {stream} stream\n */\nfunction addListeners(deps, s) {\n  for (var i = 0; i < deps.length; ++i) {\n    deps[i].listeners.push(s);\n  }\n}\n\n/**\n * @private\n * Removes an stream from a dependency array\n * @param {stream} stream\n * @param {Array<stream>} dependencies\n */\nfunction removeListener(s, listeners) {\n  var idx = listeners.indexOf(s);\n  listeners[idx] = listeners[listeners.length - 1];\n  listeners.length--;\n}\n\n/**\n * @private\n * Detach a stream from its dependencies\n * @param {stream} stream\n */\nfunction detachDeps(s) {\n  for (var i = 0; i < s.deps.length; ++i) {\n    removeListener(s, s.deps[i].listeners);\n  }\n  s.deps.length = 0;\n}\n\n/**\n * @private\n * Ends a stream\n */\nfunction endStream(s) {\n  if (s.deps !== undefined) detachDeps(s);\n  if (s.end !== undefined) detachDeps(s.end);\n}\n\n/**\n * @private\n */\n/**\n * @private\n * transducer stream transformer\n */\nfunction StreamTransformer() { }\nStreamTransformer.prototype['@@transducer/init'] = function() { };\nStreamTransformer.prototype['@@transducer/result'] = function() { };\nStreamTransformer.prototype['@@transducer/step'] = function(s, v) { return v; };\n\nmodule.exports = flyd;\n","var _arity = /*#__PURE__*/require('./internal/_arity');\n\nvar _curry1 = /*#__PURE__*/require('./internal/_curry1');\n\nvar _curry2 = /*#__PURE__*/require('./internal/_curry2');\n\nvar _curryN = /*#__PURE__*/require('./internal/_curryN');\n\n/**\n * Returns a curried equivalent of the provided function, with the specified\n * arity. The curried function has two unusual capabilities. First, its\n * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n * following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value [`R.__`](#__) may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is [`R.__`](#__),\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      var sumArgs = (...args) => R.sum(args);\n *\n *      var curriedAddFourNumbers = R.curryN(4, sumArgs);\n *      var f = curriedAddFourNumbers(1, 2);\n *      var g = f(3);\n *      g(4); //=> 10\n */\n\n\nvar curryN = /*#__PURE__*/_curry2(function curryN(length, fn) {\n  if (length === 1) {\n    return _curry1(fn);\n  }\n  return _arity(length, _curryN(length, [], fn));\n});\nmodule.exports = curryN;","function _arity(n, fn) {\n  /* eslint-disable no-unused-vars */\n  switch (n) {\n    case 0:\n      return function () {\n        return fn.apply(this, arguments);\n      };\n    case 1:\n      return function (a0) {\n        return fn.apply(this, arguments);\n      };\n    case 2:\n      return function (a0, a1) {\n        return fn.apply(this, arguments);\n      };\n    case 3:\n      return function (a0, a1, a2) {\n        return fn.apply(this, arguments);\n      };\n    case 4:\n      return function (a0, a1, a2, a3) {\n        return fn.apply(this, arguments);\n      };\n    case 5:\n      return function (a0, a1, a2, a3, a4) {\n        return fn.apply(this, arguments);\n      };\n    case 6:\n      return function (a0, a1, a2, a3, a4, a5) {\n        return fn.apply(this, arguments);\n      };\n    case 7:\n      return function (a0, a1, a2, a3, a4, a5, a6) {\n        return fn.apply(this, arguments);\n      };\n    case 8:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        return fn.apply(this, arguments);\n      };\n    case 9:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        return fn.apply(this, arguments);\n      };\n    case 10:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n        return fn.apply(this, arguments);\n      };\n    default:\n      throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n}\nmodule.exports = _arity;","var _isPlaceholder = /*#__PURE__*/require('./_isPlaceholder');\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\n\nfunction _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n}\nmodule.exports = _curry1;","function _isPlaceholder(a) {\n       return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n}\nmodule.exports = _isPlaceholder;","var _curry1 = /*#__PURE__*/require('./_curry1');\n\nvar _isPlaceholder = /*#__PURE__*/require('./_isPlaceholder');\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\n\nfunction _curry2(fn) {\n  return function f2(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return f2;\n      case 1:\n        return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n          return fn(a, _b);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b);\n        }) : fn(a, b);\n    }\n  };\n}\nmodule.exports = _curry2;","var _arity = /*#__PURE__*/require('./_arity');\n\nvar _isPlaceholder = /*#__PURE__*/require('./_isPlaceholder');\n\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @param {Array} received An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\n\nfunction _curryN(length, received, fn) {\n  return function () {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n      if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n      combined[combinedIdx] = result;\n      if (!_isPlaceholder(result)) {\n        left -= 1;\n      }\n      combinedIdx += 1;\n    }\n    return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));\n  };\n}\nmodule.exports = _curryN;","var flyd = require('../../lib');\n\nfunction dropRepeatsWith(eq, s) {\n  var prev;\n  return flyd.combine(function(s, self) {\n    if (!self.hasVal || !eq(s.val, prev)) {\n      self(s.val);\n      prev = s.val;\n    }\n  }, [s]);\n}\n\nexports.dropRepeats = function(s) {\n  return dropRepeatsWith(strictEq, s);\n};\n\nexports.dropRepeatsWith = flyd.curryN(2, dropRepeatsWith);\n\nfunction strictEq(a, b) {\n  return a === b;\n}\n","module.exports = \"b517ddadbe8d424c\";","/**\n * @fileOverview Contains definition of the core graph object.\n */\n\n// TODO: need to change storage layer:\n// 1. Be able to get all nodes O(1)\n// 2. Be able to get number of links O(1)\n\n/**\n * @example\n *  var graph = require('ngraph.graph')();\n *  graph.addNode(1);     // graph has one node.\n *  graph.addLink(2, 3);  // now graph contains three nodes and one link.\n *\n */\nmodule.exports = createGraph;\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates a new graph\n */\nfunction createGraph(options) {\n  // Graph structure is maintained as dictionary of nodes\n  // and array of links. Each node has 'links' property which\n  // hold all links related to that node. And general links\n  // array is used to speed up all links enumeration. This is inefficient\n  // in terms of memory, but simplifies coding.\n  options = options || {};\n  if ('uniqueLinkId' in options) {\n    console.warn(\n      'ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\\n' +\n      'Use `multigraph` option instead\\n',\n      '\\n',\n      'Note: there is also change in default behavior: From now on each graph\\n'+\n      'is considered to be not a multigraph by default (each edge is unique).'\n    );\n\n    options.multigraph = options.uniqueLinkId;\n  }\n\n  // Dear reader, the non-multigraphs do not guarantee that there is only\n  // one link for a given pair of node. When this option is set to false\n  // we can save some memory and CPU (18% faster for non-multigraph);\n  if (options.multigraph === undefined) options.multigraph = false;\n\n  if (typeof Map !== 'function') {\n    // TODO: Should we polyfill it ourselves? We don't use much operations there..\n    throw new Error('ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph');\n  } \n\n  var nodes = new Map();\n  var links = [],\n    // Hash of multi-edges. Used to track ids of edges between same nodes\n    multiEdges = {},\n    suspendEvents = 0,\n\n    createLink = options.multigraph ? createUniqueLink : createSingleLink,\n\n    // Our graph API provides means to listen to graph changes. Users can subscribe\n    // to be notified about changes in the graph by using `on` method. However\n    // in some cases they don't use it. To avoid unnecessary memory consumption\n    // we will not record graph changes until we have at least one subscriber.\n    // Code below supports this optimization.\n    //\n    // Accumulates all changes made during graph updates.\n    // Each change element contains:\n    //  changeType - one of the strings: 'add', 'remove' or 'update';\n    //  node - if change is related to node this property is set to changed graph's node;\n    //  link - if change is related to link this property is set to changed graph's link;\n    changes = [],\n    recordLinkChange = noop,\n    recordNodeChange = noop,\n    enterModification = noop,\n    exitModification = noop;\n\n  // this is our public API:\n  var graphPart = {\n    /**\n     * Adds node to the graph. If node with given id already exists in the graph\n     * its data is extended with whatever comes in 'data' argument.\n     *\n     * @param nodeId the node's identifier. A string or number is preferred.\n     * @param [data] additional data for the node being added. If node already\n     *   exists its data object is augmented with the new one.\n     *\n     * @return {node} The newly added node or node with given id if it already exists.\n     */\n    addNode: addNode,\n\n    /**\n     * Adds a link to the graph. The function always create a new\n     * link between two nodes. If one of the nodes does not exists\n     * a new node is created.\n     *\n     * @param fromId link start node id;\n     * @param toId link end node id;\n     * @param [data] additional data to be set on the new link;\n     *\n     * @return {link} The newly created link\n     */\n    addLink: addLink,\n\n    /**\n     * Removes link from the graph. If link does not exist does nothing.\n     *\n     * @param link - object returned by addLink() or getLinks() methods.\n     *\n     * @returns true if link was removed; false otherwise.\n     */\n    removeLink: removeLink,\n\n    /**\n     * Removes node with given id from the graph. If node does not exist in the graph\n     * does nothing.\n     *\n     * @param nodeId node's identifier passed to addNode() function.\n     *\n     * @returns true if node was removed; false otherwise.\n     */\n    removeNode: removeNode,\n\n    /**\n     * Gets node with given identifier. If node does not exist undefined value is returned.\n     *\n     * @param nodeId requested node identifier;\n     *\n     * @return {node} in with requested identifier or undefined if no such node exists.\n     */\n    getNode: getNode,\n\n    /**\n     * Gets number of nodes in this graph.\n     *\n     * @return number of nodes in the graph.\n     */\n    getNodeCount: getNodeCount,\n\n    /**\n     * Gets total number of links in the graph.\n     */\n    getLinkCount: getLinkCount,\n\n    /**\n     * Synonym for `getLinkCount()`\n     */\n    getLinksCount: getLinkCount,\n    \n    /**\n     * Synonym for `getNodeCount()`\n     */\n    getNodesCount: getNodeCount,\n\n    /**\n     * Gets all links (inbound and outbound) from the node with given id.\n     * If node with given id is not found null is returned.\n     *\n     * @param nodeId requested node identifier.\n     *\n     * @return Array of links from and to requested node if such node exists;\n     *   otherwise null is returned.\n     */\n    getLinks: getLinks,\n\n    /**\n     * Invokes callback on each node of the graph.\n     *\n     * @param {Function(node)} callback Function to be invoked. The function\n     *   is passed one argument: visited node.\n     */\n    forEachNode: forEachNode,\n\n    /**\n     * Invokes callback on every linked (adjacent) node to the given one.\n     *\n     * @param nodeId Identifier of the requested node.\n     * @param {Function(node, link)} callback Function to be called on all linked nodes.\n     *   The function is passed two parameters: adjacent node and link object itself.\n     * @param oriented if true graph treated as oriented.\n     */\n    forEachLinkedNode: forEachLinkedNode,\n\n    /**\n     * Enumerates all links in the graph\n     *\n     * @param {Function(link)} callback Function to be called on all links in the graph.\n     *   The function is passed one parameter: graph's link object.\n     *\n     * Link object contains at least the following fields:\n     *  fromId - node id where link starts;\n     *  toId - node id where link ends,\n     *  data - additional data passed to graph.addLink() method.\n     */\n    forEachLink: forEachLink,\n\n    /**\n     * Suspend all notifications about graph changes until\n     * endUpdate is called.\n     */\n    beginUpdate: enterModification,\n\n    /**\n     * Resumes all notifications about graph changes and fires\n     * graph 'changed' event in case there are any pending changes.\n     */\n    endUpdate: exitModification,\n\n    /**\n     * Removes all nodes and links from the graph.\n     */\n    clear: clear,\n\n    /**\n     * Detects whether there is a link between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     * NOTE: this function is synonim for getLink()\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    hasLink: getLink,\n\n    /**\n     * Detects whether there is a node with given id\n     * \n     * Operation complexity is O(1)\n     * NOTE: this function is synonim for getNode()\n     *\n     * @returns node if there is one; Falsy value otherwise.\n     */\n    hasNode: getNode,\n\n    /**\n     * Gets an edge between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     *\n     * @param {string} fromId link start identifier\n     * @param {string} toId link end identifier\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    getLink: getLink\n  };\n\n  // this will add `on()` and `fire()` methods.\n  eventify(graphPart);\n\n  monitorSubscribers();\n\n  return graphPart;\n\n  function monitorSubscribers() {\n    var realOn = graphPart.on;\n\n    // replace real `on` with our temporary on, which will trigger change\n    // modification monitoring:\n    graphPart.on = on;\n\n    function on() {\n      // now it's time to start tracking stuff:\n      graphPart.beginUpdate = enterModification = enterModificationReal;\n      graphPart.endUpdate = exitModification = exitModificationReal;\n      recordLinkChange = recordLinkChangeReal;\n      recordNodeChange = recordNodeChangeReal;\n\n      // this will replace current `on` method with real pub/sub from `eventify`.\n      graphPart.on = realOn;\n      // delegate to real `on` handler:\n      return realOn.apply(graphPart, arguments);\n    }\n  }\n\n  function recordLinkChangeReal(link, changeType) {\n    changes.push({\n      link: link,\n      changeType: changeType\n    });\n  }\n\n  function recordNodeChangeReal(node, changeType) {\n    changes.push({\n      node: node,\n      changeType: changeType\n    });\n  }\n\n  function addNode(nodeId, data) {\n    if (nodeId === undefined) {\n      throw new Error('Invalid node identifier');\n    }\n\n    enterModification();\n\n    var node = getNode(nodeId);\n    if (!node) {\n      node = new Node(nodeId, data);\n      recordNodeChange(node, 'add');\n    } else {\n      node.data = data;\n      recordNodeChange(node, 'update');\n    }\n\n    nodes.set(nodeId, node);\n\n    exitModification();\n    return node;\n  }\n\n  function getNode(nodeId) {\n    return nodes.get(nodeId);\n  }\n\n  function removeNode(nodeId) {\n    var node = getNode(nodeId);\n    if (!node) {\n      return false;\n    }\n\n    enterModification();\n\n    var prevLinks = node.links;\n    if (prevLinks) {\n      node.links = null;\n      for(var i = 0; i < prevLinks.length; ++i) {\n        removeLink(prevLinks[i]);\n      }\n    }\n\n    nodes.delete(nodeId)\n\n    recordNodeChange(node, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n\n  function addLink(fromId, toId, data) {\n    enterModification();\n\n    var fromNode = getNode(fromId) || addNode(fromId);\n    var toNode = getNode(toId) || addNode(toId);\n\n    var link = createLink(fromId, toId, data);\n\n    links.push(link);\n\n    // TODO: this is not cool. On large graphs potentially would consume more memory.\n    addLinkToNode(fromNode, link);\n    if (fromId !== toId) {\n      // make sure we are not duplicating links for self-loops\n      addLinkToNode(toNode, link);\n    }\n\n    recordLinkChange(link, 'add');\n\n    exitModification();\n\n    return link;\n  }\n\n  function createSingleLink(fromId, toId, data) {\n    var linkId = makeLinkId(fromId, toId);\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function createUniqueLink(fromId, toId, data) {\n    // TODO: Get rid of this method.\n    var linkId = makeLinkId(fromId, toId);\n    var isMultiEdge = multiEdges.hasOwnProperty(linkId);\n    if (isMultiEdge || getLink(fromId, toId)) {\n      if (!isMultiEdge) {\n        multiEdges[linkId] = 0;\n      }\n      var suffix = '@' + (++multiEdges[linkId]);\n      linkId = makeLinkId(fromId + suffix, toId + suffix);\n    }\n\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function getNodeCount() {\n    return nodes.size;\n  }\n\n  function getLinkCount() {\n    return links.length;\n  }\n\n  function getLinks(nodeId) {\n    var node = getNode(nodeId);\n    return node ? node.links : null;\n  }\n\n  function removeLink(link) {\n    if (!link) {\n      return false;\n    }\n    var idx = indexOfElementInArray(link, links);\n    if (idx < 0) {\n      return false;\n    }\n\n    enterModification();\n\n    links.splice(idx, 1);\n\n    var fromNode = getNode(link.fromId);\n    var toNode = getNode(link.toId);\n\n    if (fromNode) {\n      idx = indexOfElementInArray(link, fromNode.links);\n      if (idx >= 0) {\n        fromNode.links.splice(idx, 1);\n      }\n    }\n\n    if (toNode) {\n      idx = indexOfElementInArray(link, toNode.links);\n      if (idx >= 0) {\n        toNode.links.splice(idx, 1);\n      }\n    }\n\n    recordLinkChange(link, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n  function getLink(fromNodeId, toNodeId) {\n    // TODO: Use sorted links to speed this up\n    var node = getNode(fromNodeId),\n      i;\n    if (!node || !node.links) {\n      return null;\n    }\n\n    for (i = 0; i < node.links.length; ++i) {\n      var link = node.links[i];\n      if (link.fromId === fromNodeId && link.toId === toNodeId) {\n        return link;\n      }\n    }\n\n    return null; // no link.\n  }\n\n  function clear() {\n    enterModification();\n    forEachNode(function(node) {\n      removeNode(node.id);\n    });\n    exitModification();\n  }\n\n  function forEachLink(callback) {\n    var i, length;\n    if (typeof callback === 'function') {\n      for (i = 0, length = links.length; i < length; ++i) {\n        callback(links[i]);\n      }\n    }\n  }\n\n  function forEachLinkedNode(nodeId, callback, oriented) {\n    var node = getNode(nodeId);\n\n    if (node && node.links && typeof callback === 'function') {\n      if (oriented) {\n        return forEachOrientedLink(node.links, nodeId, callback);\n      } else {\n        return forEachNonOrientedLink(node.links, nodeId, callback);\n      }\n    }\n  }\n\n  function forEachNonOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      var linkedNodeId = link.fromId === nodeId ? link.toId : link.fromId;\n\n      quitFast = callback(nodes.get(linkedNodeId), link);\n      if (quitFast) {\n        return true; // Client does not need more iterations. Break now.\n      }\n    }\n  }\n\n  function forEachOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      if (link.fromId === nodeId) {\n        quitFast = callback(nodes.get(link.toId), link)\n        if (quitFast) {\n          return true; // Client does not need more iterations. Break now.\n        }\n      }\n    }\n  }\n\n  // we will not fire anything until users of this library explicitly call `on()`\n  // method.\n  function noop() {}\n\n  // Enter, Exit modification allows bulk graph updates without firing events.\n  function enterModificationReal() {\n    suspendEvents += 1;\n  }\n\n  function exitModificationReal() {\n    suspendEvents -= 1;\n    if (suspendEvents === 0 && changes.length > 0) {\n      graphPart.fire('changed', changes);\n      changes.length = 0;\n    }\n  }\n\n  function forEachNode(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Function is expected to iterate over graph nodes. You passed ' + callback);\n    }\n\n    var valuesIterator = nodes.values();\n    var nextValue = valuesIterator.next();\n    while (!nextValue.done) {\n      if (callback(nextValue.value)) {\n        return true; // client doesn't want to proceed. Return.\n      }\n      nextValue = valuesIterator.next();\n    }\n  }\n}\n\n// need this for old browsers. Should this be a separate module?\nfunction indexOfElementInArray(element, array) {\n  if (!array) return -1;\n\n  if (array.indexOf) {\n    return array.indexOf(element);\n  }\n\n  var len = array.length,\n    i;\n\n  for (i = 0; i < len; i += 1) {\n    if (array[i] === element) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n * Internal structure to represent node;\n */\nfunction Node(id, data) {\n  this.id = id;\n  this.links = null;\n  this.data = data;\n}\n\nfunction addLinkToNode(node, link) {\n  if (node.links) {\n    node.links.push(link);\n  } else {\n    node.links = [link];\n  }\n}\n\n/**\n * Internal structure to represent links;\n */\nfunction Link(fromId, toId, data, id) {\n  this.fromId = fromId;\n  this.toId = toId;\n  this.data = data;\n  this.id = id;\n}\n\nfunction makeLinkId(fromId, toId) {\n  return fromId.toString() + ' ' + toId.toString();\n}\n","module.exports = function eventify(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"gOfOb\\\":\\\"index.56098512.js\\\",\\\"gwDts\\\":\\\"openpgp.min.173281cd.js\\\"}\"));"],"names":["$b23478aa5f656b71$export$6503ec6e8aabbaf","$b23478aa5f656b71$export$f7ad0328861e2f03","$b23478aa5f656b71$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$gmGs0","parcelRequire","OBFUSCATED_FORMSPREE_ENDPOINT","DATA_URL","cloneTemplate","$lodVU","cloneTemplateFrom","document","customElements","define","$ktVaQ","ClosingDetails","extends","TabPanel","TabGroup","TagList","ModalOverlay","DialogPrompt","Toast","getElementById","addEventListener","_","body","append","feedback","navigator","userAgent","privacy","e","switchToStory","target","files","dragDropOverlay","toast","text","lingerTime","fadeTime","createElement","setAttribute","async","askToConfirm","filename","Promise","res","rej","respond","response","currentTarget","dispatchEvent","closeRequest","template","prompt","querySelector","textContent","substituteText","sidebarMenu","tale","state","routeTree","settings","history","passage","title","curr","close","tagEditor","value","gatherTags","join","psg","get","modifiedTags","split","exportObject","extractMetadata","feedbackForm","buildFeedback","debugInfo","includeDebugInfo","disabled","checked","submit","type","preventDefault","feedbackID","nanoid","data","FormData","subject","entries","map","k","v","feedbackPreview","firstChild","gatherDebugInfo","gatherTagChanges","form","encryptMessage","$parcel$interopDefault","$36WE7","then","encryptedBody","sendFormspree","reset","catch","msg","alert","retrospective","ref","ref1","ref2","innerText","link","ontoggle","open","prepend","getAncestryOf","pastPassage","choice","render","passageTagViewer","tags","tagViewer","inlineTagViewer","passageTags","routeTags","recursive","ref3","_modifiedTags","ref4","arrayUnique","Tree","cata","node","concat","children","fetch","atob","method","headers","Accept","ok","errMsg","data1","json","hasOwn","error","JSON","stringify","deviousVersion","currentPassage","fromEntries","filter","hasOwnProperty","file","storyText","storyDoc","parseDoc","name","hideLanding","loadDocIntoDom","injectDigitizerFeatures","classList","add","doc","head","insertAdjacentHTML","innerHTML","querySelectorAll","forEach","s","eval","Event","store","passages","window","metadataName","some","has","err","metadata","passageGraph","buildPassageGraph","fromGraphBfs","addChild","currentChild","forEachLinkedNode","child","assign","key","set","display","source","callback","CustomEvent","detail","getPrototypeOf","apply","this","parent","annotateLinksWithTheirTarget","addLinkTagLists","stopPropagation","dataTransfer","getLinks","Array","from","matchAll","storeArea","g","$fH3MG","titles","Set","el","getAttribute","addLink","passageBody","linkTargets","links","take","zip","before","include","strip","filterObjectByKey","toObject","$be9fa13a19689010$export$ac4959f4f1338dfc","size","crypto","getRandomValues","Uint8Array","reduce","byte","toString","toUpperCase","$lsFtg","stream","$ee92dd9f2dc38bbd$var$stream","$cgW0f","$ee92dd9f2dc38bbd$var$combine","streams","fn","combine","$ee92dd9f2dc38bbd$var$updateAttribute","srm","attr","obj","pipe","$eEy6s","dropRepeats","on","x","$ee92dd9f2dc38bbd$export$ee7265346f578d9d","HTMLDetailsElement","connectedCallback","_closeIfUnfocused","disconnectedCallback","removeEventListener","constructor","super","contains","elementFromPoint","clientX","clientY","$ee92dd9f2dc38bbd$export$3d96ec278d3efce4","HTMLElement","group","parentElement","$ee92dd9f2dc38bbd$export$85fd4ed3b8ca1010","observedAttributes","attributeChangedCallback","oldVal","newVal","idChanged","default","chain","active","gActive","setClass","attachShadow","mode","shadowRoot","$6woeQ","role","tabs","replaceChildren","tab","class","onclick","defaultTabTitle","part","assignedElements","HTMLUListElement","connected","args","sort","tag","appendChild","_overlay","remove","$ee92dd9f2dc38bbd$export$8948f78d83984c69","onsubmit","$51dff975c0368577$export$2e2bcd8739ae039","defineProperty","enumerable","configurable","writable","$a8h9n","$4bf88878fae0618f$var$htmlProps","nodeValue","className","tabIndex","$4bf88878fae0618f$export$2e2bcd8739ae039","tagName","nodeType","arguments","arg","isArray","createTextNode","j","ks","val","style","cssText","charCodeAt","slice","toLowerCase","tgt","parentNode","$7607f46d1c117952$export$2e2bcd8739ae039","$f926a5a5b972730f$export$2796c4ce44e61efa","elem","cl","bool","$f926a5a5b972730f$export$8048b892d651b310","$f926a5a5b972730f$export$e772c8ff12451969","ms","setTimeout","$f926a5a5b972730f$export$a4627e546088548d","fns","acc","$f926a5a5b972730f$export$8901015135f2fb22","rows","c","row","$f926a5a5b972730f$export$b7df5d561049483a","n","iter","$f926a5a5b972730f$export$7bf6fd20e75fd96","arr","$f926a5a5b972730f$export$cf80d7b87eda7a5b","pred","$f926a5a5b972730f$export$485830fe756029f5","$f926a5a5b972730f$var$_key","$f926a5a5b972730f$export$f7404bda8d1e381c","context","replaceAll","match","$f926a5a5b972730f$export$7fbedc92909ed28e","Map","setRoot","attributes","root","undefined","push","deleteNode","delete","morphism","ancestry","unshift","static","tree","f","newLayer","after","stack","at","pop","$jxdtM","$7Vj6Q","getChildren","frontier","addChildOf","currentNode","$f926a5a5b972730f$export$42e04a57be803477","templateId","importNode","content","childNodes","nodeName","trim","$f926a5a5b972730f$export$5db361593220645","docText","DOMParser","parseFromString","$f926a5a5b972730f$export$ac1f1552ea16f7d5","$oNJRK","saveAs","Blob","$f926a5a5b972730f$export$802132930513888b","armoredPublicKey","readKey","encrypt","createMessage","message","encryptionKeys","armoredKey","$502a2e0cb4ba999c$export$2e2bcd8739ae039","ownKeys","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","$9cef4224e4a66c9d$export$2e2bcd8739ae039","getOwnPropertyDescriptors","defineProperties","object","enumerableOnly","symbols","$9cef4224e4a66c9d$var$ownKeys","b","module","exports","a","d","XMLHttpRequest","responseType","onload","onerror","console","send","a1","status","MouseEvent","createEvent","initMouseEvent","self","$parcel$global","global","test","HTMLAnchorElement","prototype","h","URL","webkitURL","download","rel","href","origin","location","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","safari","FileReader","onloadend","result","replace","readAsDataURL","l","m","amd","getBundleURL","resolve","$ex78I","bundle","reject","globalName","Math","random","cleanup","script","charset","$a949af897dfa2ad9$var$cachedBundles","$a949af897dfa2ad9$var$cachedPreloads","$a949af897dfa2ad9$var$cachedPrefetches","$a949af897dfa2ad9$var$getCache","loader","cache","$832d5eb3e17cea9d$export$bdfd709ae4826697","$832d5eb3e17cea9d$var$bundleURL","$832d5eb3e17cea9d$var$getBaseURL","url","matches","$832d5eb3e17cea9d$var$getBundleURL","$8ef3f8dcd7822723$var$trueFn","$8ef3f8dcd7822723$var$inStream","$8ef3f8dcd7822723$var$toUpdate","$8ef3f8dcd7822723$var$order","$8ef3f8dcd7822723$var$orderNextIdx","$8ef3f8dcd7822723$var$flushingUpdateQueue","$8ef3f8dcd7822723$var$flushingStreamValue","$8ef3f8dcd7822723$var$flyd","$8ef3f8dcd7822723$var$combine","deps","depEndStreams","endStream","$8ef3f8dcd7822723$var$createDependentStream","end","depsChanged","fnArgs","listeners","$8ef3f8dcd7822723$var$addListeners","$8ef3f8dcd7822723$var$updateStream","$8ef3f8dcd7822723$var$map","$8ef3f8dcd7822723$var$boundMap","$8ef3f8dcd7822723$var$operator_pipe","$8ef3f8dcd7822723$var$boundChain","$8ef3f8dcd7822723$var$chain","flatEnd","internalEnded","alive","last","flatStream","own","newS","endsOn","$8ef3f8dcd7822723$var$ap","s2","s1","$8ef3f8dcd7822723$var$boundAp","$8ef3f8dcd7822723$var$fantasy_land_ap","$8ef3f8dcd7822723$var$streamToString","$8ef3f8dcd7822723$var$createStream","$8ef3f8dcd7822723$var$updateStreamValue","hasVal","updaters","queued","ap","of","toJSON","depsMet","shouldUpdate","every","$8ef3f8dcd7822723$var$initialDependenciesMet","$8ef3f8dcd7822723$var$dependenciesAreMet","returnVal","$8ef3f8dcd7822723$var$flushUpdate","$8ef3f8dcd7822723$var$listenersNeedUpdating","listener","$8ef3f8dcd7822723$var$updateLaterUsing","$8ef3f8dcd7822723$var$findDeps","updater","shift","nextUpdateFn","o","list","$8ef3f8dcd7822723$var$endStream","$8ef3f8dcd7822723$var$updateListeners","lists","$8ef3f8dcd7822723$var$markListeners","$8ef3f8dcd7822723$var$removeListener","idx","indexOf","$8ef3f8dcd7822723$var$detachDeps","$8ef3f8dcd7822723$var$StreamTransformer","initialValue","$1nYwi","isStream","call","immediate","endS","scan","ns","merge","changed","transduce","xform","curryN","fromPromise","p","flattenPromise","$6eJYh","$1026e2650a4010d0$var$curryN","$1dUzI","$j78DI","$fOv2B","a0","a2","a3","a4","a5","a6","a7","a8","a9","$keqXc","f1","f2","_b","_a","$b8339a99f14f761a$var$_curryN","received","combined","argsIdx","left","combinedIdx","$aaaf41478e6408ed$export$f42b5f849eadee29","$aaaf41478e6408ed$var$dropRepeatsWith","eq","prev","$aaaf41478e6408ed$var$strictEq","options","multigraph","uniqueLinkId","nodes","multiEdges","suspendEvents","createLink","fromId","toId","linkId","$b6cdce9dcc025a1f$var$makeLinkId","isMultiEdge","getLink","suffix","$b6cdce9dcc025a1f$var$Link","changes","recordLinkChange","noop","recordNodeChange","enterModification","exitModification","graphPart","addNode","fromNode","getNode","toNode","$b6cdce9dcc025a1f$var$addLinkToNode","removeLink","removeNode","getNodeCount","getLinkCount","getLinksCount","getNodesCount","nodeId","forEachNode","oriented","forEachOrientedLink","linkedNodeId","forEachNonOrientedLink","forEachLink","beginUpdate","endUpdate","clear","hasLink","hasNode","$bS1IX","realOn","enterModificationReal","exitModificationReal","recordLinkChangeReal","recordNodeChangeReal","monitorSubscribers","changeType","$b6cdce9dcc025a1f$var$Node","prevLinks","$b6cdce9dcc025a1f$var$indexOfElementInArray","splice","fromNodeId","toNodeId","fire","valuesIterator","values","nextValue","next","done","element","array","len","reservedWords","$023aefcb5e397a7e$var$validateSubject","eventsStorage","registeredEvents","create","eventName","ctx","handlers","off","callbacks","fireArguments","callbackInfo","$023aefcb5e397a7e$var$createEventsStorage","register","parse"],"version":3,"file":"index.56098512.js.map"}